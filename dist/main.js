(()=>{"use strict";var e,t={4766:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffle=void 0,t.shuffle=function(e){const t=e;for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}},4904:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AssertLessOrEqualThanError=t.AssertLessThanError=t.AssertGreaterOrEqualThanError=t.AssertGreaterThanError=t.AssertIntegerError=t.AssertError=t.assertLessOrEqualThan=t.assertLessThan=t.assertGreaterOrEqualThan=t.assertGreaterThan=t.assertInteger=void 0,t.assertInteger=function(e){if(!Number.isInteger(e))throw new r},t.assertGreaterThan=function(e,t){if(e<=t)throw new n},t.assertGreaterOrEqualThan=function(e,t){if(e<t)throw new s},t.assertLessThan=function(e,t){if(e>=t)throw new o},t.assertLessOrEqualThan=function(e,t){if(e>t)throw new a};class i extends Error{}t.AssertError=i;class r extends i{}t.AssertIntegerError=r;class n extends i{}t.AssertGreaterThanError=n;class s extends i{}t.AssertGreaterOrEqualThanError=s;class o extends i{}t.AssertLessThanError=o;class a extends i{}t.AssertLessOrEqualThanError=a},6469:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;const r=i(4904),n=i(5629);class s{constructor(e,t,i){this.red=e,this.green=t,this.blue=i,(0,r.assertGreaterOrEqualThan)(e,0),(0,r.assertGreaterOrEqualThan)(t,0),(0,r.assertGreaterOrEqualThan)(i,0),(0,r.assertLessOrEqualThan)(e,255),(0,r.assertLessOrEqualThan)(t,255),(0,r.assertLessOrEqualThan)(i,255);const n=e=>1===e.length?"0"+e:e;this.hex="#"+n(this.red.toString(16))+n(this.green.toString(16))+n(this.blue.toString(16))}getRed(){return this.red}getGreen(){return this.green}getBlue(){return this.blue}mix(e,t){return(0,r.assertGreaterOrEqualThan)(t,0),(0,r.assertLessOrEqualThan)(t,1),new s(Math.round(this.red*t+e.getRed()*(1-t)),Math.round(this.green*t+e.getGreen()*(1-t)),Math.round(this.blue*t+e.getBlue()*(1-t)))}toHexFormat(){return this.hex}equals(e){return this.blue===e.getBlue()&&this.red===e.getRed()&&this.green===e.getGreen()}static random(){return new s((0,n.randomInt)(0,255),(0,n.randomInt)(0,255),(0,n.randomInt)(0,255))}static fromHex(e){return e.startsWith("#")&&(e=e.slice(1)),new s(parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16))}}t.Color=s},5629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomInt=void 0,t.randomInt=function(e,t){const i=t-e+1;return Math.floor(Math.random()*i)+e}},2629:(e,t,i)=>{const r=i(7294),n=i(745),s=i(751),o=i(9378),a=i(1997),l=i(711),c=i(1548),h=i(2291),u=i(7698),d={simulationStore:new c.SimulationStore(s.createSimulation,(0,l.loadOptions)()),UIStore:new h.UIStore};(0,n.createRoot)(document.getElementById("root")).render(r.createElement(a.AppContext.Provider,{value:d},r.createElement(u.GlobalStyle,null),r.createElement(o.App,null)))},8173:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=void 0;const r=i(5079),n=i(6449),s=i(2386),o=i(3717),a=i(8601);t.CanvasRenderer=class{constructor(e,t,i){this.canvas=e,this.simulation=t,this.handlingStep=!0,this.scale=1,this.offset=[0,0],this.width=this.canvas.width,this.height=this.canvas.height,this.context=e.getContext("2d"),this.saveGridState(),this.setRenderStrategy(i),this.fitCenter(),this.initHandlingSimulationStep(),this.initHandlingCanvasResize();const s=(0,r.initMouseInteractions)(e,this),o=(0,n.initTouchInteractions)(e,this);t.subscribe("end",(()=>{s(),o()}))}enableHandlingStep(){this.handlingStep=!0}disableHandlingStep(){this.handlingStep=!1}setRenderStrategy(e){"default"===e?this.renderStrategy=new s.DefaultStrategy(this.context):"energy"===e?this.renderStrategy=new o.EnergyStrategy(this.context):"genesis"===e&&(this.renderStrategy=new a.GenesisStrategy(this.context)),this.requestRedraw()}clear(){this.context.clearRect(0,0,this.width,this.height)}getScale(){return this.scale}setScale(e){this.scale=e<1?1:e>40?40:Math.round(e),this.requestRedraw()}scaleUp(){this.setScale(1.5*this.getScale())}scaleDown(){this.setScale(this.getScale()/1.5)}getOffset(){return this.offset}setOffset(e,t){this.offset=[Math.round(e),Math.round(t)],this.requestRedraw()}fitCenter(){const e=this.simulation.getGrid().getSize(),t=e.getRatio(),i=this.width/this.height,r=t>=i?this.width:this.height,n=t>=i?e.getWidth():e.getHeight();for(let e=1;e<=40;e++)if(r<e*n){this.setScale(e-1);break}this.setOffset(Math.ceil((this.width-this.scale*e.getWidth())/2),Math.ceil((this.height-this.scale*e.getHeight())/2))}requestRedraw(){this.redrawId||(this.redrawId=window.requestAnimationFrame((()=>{this.render(),this.redrawId=null})))}render(){if(this.renderStrategy){this.clear();for(const{x:e,y:t,cell:i}of this.cells){const r=this.offset[0]+e*this.scale;if(r+this.scale<0||r>=this.width)continue;const n=this.offset[1]+t*this.scale;n+this.scale<0||n>=this.height||i.visit(this.renderStrategy.createVisitor(r,n,this.scale))}}}saveGridState(){this.cells=Array.from(this.simulation.getGrid())}initHandlingSimulationStep(){this.simulation.subscribe("step",(e=>{this.handlingStep&&(this.saveGridState(),this.requestRedraw())}))}initHandlingCanvasResize(){this.resizeObserver=new ResizeObserver((e=>{for(let t of e){const e=0===this.width||0===this.height;this.width=this.canvas.width,this.height=this.canvas.height,e&&this.fitCenter()}this.requestRedraw()})),this.resizeObserver.observe(this.canvas)}}},5079:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initMouseInteractions=void 0,t.initMouseInteractions=function(e,t){let i=!1,r=[0,0];const n=e=>{const[i,r]=t.getOffset(),n=Math.round((e.clientX-i)/t.getScale()),s=Math.round((e.clientY-r)/t.getScale());e.deltaY<0?t.scaleUp():t.scaleDown(),t.setOffset(e.clientX-n*t.getScale(),e.clientY-s*t.getScale())},s=e=>{e.preventDefault(),i=!0,r=[e.clientX,e.clientY]},o=e=>{i=!1},a=e=>{if(e.preventDefault(),!i)return;const[n,s]=t.getOffset();t.setOffset(n+e.clientX-r[0],s+e.clientY-r[1]),r=[e.clientX,e.clientY]},l=e=>{i=!1};return e.addEventListener("wheel",n),e.addEventListener("mousedown",s),e.addEventListener("mouseup",o),e.addEventListener("mousemove",a),e.addEventListener("mouseleave",l),()=>{e.removeEventListener("wheel",n),e.removeEventListener("mousedown",s),e.removeEventListener("mouseup",o),e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",l)}}},6449:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initTouchInteractions=void 0,t.initTouchInteractions=function(e,t){let i={},r=0;const n=e=>{e.preventDefault();for(const t of e.changedTouches)2===Object.keys(i).length||(i[t.identifier]=t)},s=e=>{for(const t of e.changedTouches)delete i[t.identifier];r=0},o=e=>{for(const t of e.changedTouches)delete i[t.identifier];r=0};return e.addEventListener("touchstart",n,{passive:!1}),e.addEventListener("touchend",s),e.addEventListener("touchcancel",o),e.addEventListener("touchmove",o,{passive:!1}),()=>{e.removeEventListener("touchstart",n),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",o),e.removeEventListener("touchmove",o)}}},2386:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStrategy=void 0;const r=i(1890);t.DefaultStrategy=class{constructor(e,t){this.context=e,this.styles=t,this.styles=Object.assign({CELL_WALL_COLOR:"#5f5f5f",CELL_ORGANISM_COLOR:"#0B5FA5",CELL_ORGANISM_EYE_COLOR:"#66A1D2",CELL_EMPTY_COLOR:"#000000",CELL_ORGANIC_COLOR:"#FE7276"},t)}createVisitor(e,t,i){return{visitEmpty:e=>{},visitWall:r=>{this.context.fillStyle=this.styles.CELL_WALL_COLOR,this.context.fillRect(e,t,i,i)},visitOrganic:r=>{this.context.fillStyle=this.styles.CELL_ORGANIC_COLOR,this.context.fillRect(e,t,i,i)},visitOrganism:n=>{if(this.context.fillStyle=this.styles.CELL_ORGANISM_COLOR,this.context.fillRect(e,t,i,i),i<9)return;const s=i/3;let o;switch(n.getDirection()){case r.Direction.NORTH_WEST:o=[0,0];break;case r.Direction.NORTH:o=[s,0];break;case r.Direction.NORTH_EAST:o=[2*s,0];break;case r.Direction.SOUTH_WEST:o=[0,2*s];break;case r.Direction.SOUTH:o=[s,2*s];break;case r.Direction.SOUTH_EAST:o=[2*s,2*s];break;case r.Direction.WEST:o=[0,s];break;case r.Direction.EAST:o=[2*s,s]}this.context.fillStyle=this.styles.CELL_ORGANISM_EYE_COLOR,this.context.fillRect(e+o[0],t+o[1],s,s)}}}}},3717:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnergyStrategy=void 0;const r=i(6469),n=i(2386);class s extends n.DefaultStrategy{createVisitor(e,t,i){return{visitEmpty:e=>{},visitWall:r=>{this.context.fillStyle=this.styles.CELL_WALL_COLOR,this.context.fillRect(e,t,i,i)},visitOrganic:e=>{},visitOrganism:n=>{let s=n.getEnergy();this.context.fillStyle=r.Color.fromHex("#ffff00").mix(r.Color.fromHex("#ff0000"),s/100).toHexFormat(),this.context.fillRect(e,t,i,i)}}}}t.EnergyStrategy=s},8601:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenesisStrategy=void 0;const r=i(2386);class n extends r.DefaultStrategy{createVisitor(e,t,i){const r=super.createVisitor(e,t,i);return r.visitOrganism=r=>{this.context.fillStyle=r.getColor().toHexFormat(),this.context.fillRect(e,t,i,i)},r}}t.GenesisStrategy=n},4040:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCell=void 0,t.AbstractCell=class{update(e,t){}isStatic(){return!0}isEmpty(){return!1}}},4591:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellContext=void 0;const r=i(6001);class n extends Error{}t.CellContext=class{constructor(e,t,i,r){this.grid=e,this.x=t,this.y=i,this.factory=r}moveByOffest(e,t){try{const i=this.getCoordinatesbyOffset(e,t),r=this.grid.getCell(this.x,this.y);this.grid.getCell(...i).isEmpty()&&(this.grid.delete(this.x,this.y),this.grid.insert(i[0],i[1],r))}catch(e){}}deleteByOffset(e,t){this.grid.delete(...this.getCoordinatesbyOffset(e,t))}getByOffest(e,t){try{return this.grid.getCell(...this.getCoordinatesbyOffset(e,t))}catch(e){return this.factory.createWall()}}replace(e){this.grid.delete(this.x,this.y),this.grid.insert(this.x,this.y,e(this.factory))}getCoordinatesbyOffset(e,t){const i=this.grid.getLoopMode(),s=i===r.GridLoopType.TORUS||i===r.GridLoopType.HORIZONTAL,o=i===r.GridLoopType.TORUS||i===r.GridLoopType.VERTICAL,a=this.grid.getSize();let l=this.x+e,c=this.y+t;if(s)for(;l<0;)l+=a.getWidth();else if(l<0||l>a.getWidth()-1)throw new n;if(o)for(;c<0;)c+=a.getHeight();else if(c<0||c>a.getHeight()-1)throw new n;return[l%a.getWidth(),c%a.getHeight()]}}},4240:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellFactory=void 0;const r=i(7816),n=i(347),s=i(4730),o=i(59);t.CellFactory=class{createWall(){return this.wall?this.wall:this.wall=new o.WallCell}createEmpty(){return this.empty?this.empty:this.empty=new r.EmptyCell}createOrganism(e,t,i){return new s.OrganismCell(e,t,i)}createOrganic(){return this.organic?this.organic:this.organic=new n.OrganicCell}}},4017:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellVisitor=void 0,t.CellVisitor=class{visitEmpty(e){}visitWall(e){}visitOrganism(e){}visitOrganic(e){}}},7816:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyCell=void 0;const r=i(4040);class n extends r.AbstractCell{getType(){return"empty"}visit(e){e.visitEmpty(this)}isEmpty(){return!0}}t.EmptyCell=n},347:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrganicCell=void 0;const r=i(4040);class n extends r.AbstractCell{getType(){return"organic"}visit(e){e.visitOrganic(this)}}t.OrganicCell=n},4730:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrganismCell=void 0;const r=i(4040),n=i(4017),s=i(1890),o=i(7048);class a extends r.AbstractCell{constructor(e,t,i){super(),this.color=e,this.genome=t,this.energy=i,this.lifetime=0,this.direction=(0,s.randomDirection)()}getType(){return"organism"}getLifetime(){return this.lifetime}getEnergy(){return this.energy}getDirection(){return this.direction}getGenome(){return this.genome}visit(e){e.visitOrganism(this)}update(e,t){if(0!==t.getOrganismMaxLifetime()&&this.lifetime>t.getOrganismMaxLifetime()||this.energy<=0)return void e.replace((e=>e.createOrganic()));const i=(0,s.getOffset)(this.direction),r=e.getByOffest(...i),n=this.genome.getAction(this,r);n===o.OrganismAction.STEP?this.makeStep(e):n===o.OrganismAction.ROTATE_LEFT?this.rotateLeft():n===o.OrganismAction.ROTATE_RIGHT?this.rotateRight():n===o.OrganismAction.DIVIDE?this.divide(e):n===o.OrganismAction.ATTACK?this.attact(e):n===o.OrganismAction.EAT?this.eat(e,t):n===o.OrganismAction.PHOTOSYNTHESIS&&this.photosynthesis(t.getPhotosynthesisEnergy()),this.lifetime++}rotateLeft(){this.direction=(0,s.rotateLeft)(this.direction),this.changeEnergy(-1)}rotateRight(){this.direction=(0,s.rotateRight)(this.direction),this.changeEnergy(-1)}makeStep(e){e.moveByOffest(...(0,s.getOffset)(this.direction)),this.changeEnergy(-1)}divide(e){for(const t in s.Direction){const i=(0,s.getOffset)(s.Direction[t]);if(e.getByOffest(i[0],i[1]).isEmpty())return e.moveByOffest(...i),this.changeEnergy(Math.floor(this.energy/-2)),void e.replace((e=>e.createOrganism(this.color,this.genome.clone(),this.energy)))}}attact(e){const t=(0,s.getOffset)(this.direction),i=e.getByOffest(...t),r=this;i.visit(new class extends n.CellVisitor{visitOrganism(e){e.getEnergy()<=r.getEnergy()&&e.changeEnergy(r.getEnergy()/-3),r.changeEnergy(-1)}})}eat(e,t){const i=(0,s.getOffset)(this.direction),r=e.getByOffest(...i),o=this;r.visit(new class extends n.CellVisitor{visitOrganic(r){e.deleteByOffset(...i),e.moveByOffest(...i),o.changeEnergy(t.getOrganicEnergy())}})}photosynthesis(e){this.changeEnergy(e)}changeEnergy(e){this.energy+=e,this.energy>100?this.energy=100:this.energy<0&&(this.energy=0)}kill(){this.energy=0}isStatic(){return!1}isSimilar(e){return this.color.equals(e.getColor())}getColor(){return this.color}}t.OrganismCell=a},7048:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomAction=t.OrganismAction=void 0;const r=i(5629);var n;!function(e){e.ROTATE_LEFT="ROTATE_LEFT",e.ROTATE_RIGHT="ROTATE_RIGHT",e.STEP="STEP",e.ATTACK="ATTACK",e.EAT="EAT",e.DIVIDE="DIVIDE",e.NOTHING="NOTHING",e.PHOTOSYNTHESIS="PHOTOSYNTHESIS"}(n=t.OrganismAction||(t.OrganismAction={})),t.randomAction=function(){const e=Object.keys(n);return n[e[(0,r.randomInt)(0,e.length-1)]]}},1890:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rotateRight=t.rotateLeft=t.randomDirection=t.getOffset=t.Direction=void 0;const r=i(5629);var n;!function(e){e.NORTH="NORTH",e.NORTH_EAST="NORTH_EAST",e.NORTH_WEST="NORTH_WEST",e.SOUTH="SOUTH",e.SOUTH_EAST="SOUTH_EAST",e.SOUTH_WEST="SOUTH_WEST",e.EAST="EAST",e.WEST="WEST"}(n=t.Direction||(t.Direction={})),t.getOffset=function(e){switch(e){case n.NORTH:return[0,-1];case n.NORTH_EAST:return[1,-1];case n.NORTH_WEST:return[-1,-1];case n.SOUTH:return[0,1];case n.SOUTH_EAST:return[1,1];case n.SOUTH_WEST:return[-1,1];case n.EAST:return[1,0];case n.WEST:return[-1,0]}},t.randomDirection=function(){return n[Object.keys(n)[(0,r.randomInt)(0,7)]]},t.rotateLeft=function(e){switch(e){case n.NORTH:return n.NORTH_WEST;case n.NORTH_EAST:return n.NORTH;case n.NORTH_WEST:return n.WEST;case n.SOUTH:return n.SOUTH_EAST;case n.SOUTH_EAST:return n.EAST;case n.SOUTH_WEST:return n.SOUTH;case n.EAST:return n.NORTH_EAST;case n.WEST:return n.SOUTH_WEST}},t.rotateRight=function(e){switch(e){case n.NORTH:return n.NORTH_EAST;case n.NORTH_EAST:return n.EAST;case n.NORTH_WEST:return n.NORTH;case n.SOUTH:return n.SOUTH_WEST;case n.SOUTH_EAST:return n.SOUTH;case n.SOUTH_WEST:return n.WEST;case n.EAST:return n.SOUTH_EAST;case n.WEST:return n.NORTH_WEST}}},1165:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Genome=void 0;const r=i(7048),n=i(5629);var s;!function(e){e.EMPTY="EMPTY",e.WALL="WALL",e.ORGANIC="ORGANIC",e.ORGANISM_SIMILAR="ORGANISM_SIMILAR",e.ORGANISM_OTHER="ORGANISM_OTHER"}(s||(s={}));class o{constructor(e,t,i={}){this.mutationСhance=e,this.similarityLimit=t,this.reflexes=i}getAction(e,t){const i=e.getEnergy()>60;let n;if(t.visit({visitEmpty:e=>{n=s.EMPTY},visitWall:e=>{n=s.WALL},visitOrganic:e=>{n=s.ORGANIC},visitOrganism:t=>{n=e.isSimilar(t)?s.ORGANISM_SIMILAR:s.ORGANISM_OTHER}}),i&&n===s.EMPTY)return r.OrganismAction.DIVIDE;const o=this.reflexes[`${n}`];return void 0===o||o===r.OrganismAction.DIVIDE&&!i?r.OrganismAction.NOTHING:o}compare(e){return 0}isSimilar(e){return this.compare(e)>=this.similarityLimit}clone(){let e=this.similarityLimit,t=this.mutationСhance,i={};for(let e of Object.keys(s))i[e]=this.reflexes[e];if(this.mutationСhance>(0,n.randomInt)(0,100)){const o=(0,n.randomInt)(0,7);if(0===o)t+=5*(1===(0,n.randomInt)(0,1)?-1:1);else if(1===o)e+=5*(1===(0,n.randomInt)(0,1)?-1:1);else if(o>=2){const e=Object.keys(s);i[e[(0,n.randomInt)(0,e.length-1)]]=(0,r.randomAction)()}}return new o(t,e,i)}static createRandom(){let e={};for(let t of Object.keys(s))e[t]=(0,r.randomAction)();return new o(Math.floor(100*Math.random()),Math.floor(100*Math.random()),e)}}t.Genome=o},59:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WallCell=void 0;const r=i(4040);class n extends r.AbstractCell{getType(){return"wall"}visit(e){e.visitWall(this)}}t.WallCell=n},9911:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridIterator=void 0,t.GridIterator=class{constructor(e,t){this.cells=e,this.size=t,this.x=0,this.y=0}next(){const e={cell:this.cells[this.x][this.y],x:this.x,y:this.y};return this.x++,this.x===this.size.getWidth()&&(this.x=0,this.y++),e}hasNext(){return this.y<this.size.getHeight()}}},6001:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.GridLoopType=void 0,(i=t.GridLoopType||(t.GridLoopType={})).NONE="NONE",i.TORUS="TORUS",i.VERTICAL="VERTICAL",i.HORIZONTAL="HORIZONTAL"},5573:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridSize=void 0;const r=i(4904);class n{constructor(e,t){this.width=e,this.height=t,(0,r.assertGreaterThan)(e,0),(0,r.assertGreaterThan)(t,0),this.ratio=e/t,this.cellCount=this.width*this.height}getWidth(){return this.width}setWidth(e){return new n(e,this.height)}getHeight(){return this.height}setHeight(e){return new n(this.width,e)}getRatio(){return this.ratio}getCellCount(){return this.cellCount}}t.GridSize=n},8928:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;const r=i(4904),n=i(3094),s=i(9911);class o{constructor(e,t,i,r){this.simulation=e,this.size=t,this.loop=i,this.cellFactory=r,this.cells={}}*[Symbol.iterator](){const e=new s.GridIterator(this.createSnapshot(),this.size);for(;e.hasNext();)yield e.next()}getSize(){return this.size}insert(e,t,i){(0,r.assertLessThan)(e,this.size.getWidth()),(0,r.assertLessThan)(t,this.size.getHeight()),(0,r.assertGreaterOrEqualThan)(e,0),(0,r.assertGreaterOrEqualThan)(t,0),this.cells[`${e}:${t}`]=i,this.simulation.fireEvent("insertCell",new n.InsertCellEvent(i.getType()))}delete(e,t){this.simulation.fireEvent("deleteCell",new n.DeleteCellEvent(this.getCell(e,t).getType())),delete this.cells[`${e}:${t}`]}getCell(e,t){return this.cells[`${e}:${t}`]||this.cellFactory.createEmpty()}countEmpty(){let e=this.size.getCellCount();for(const t in this.cells)this.cells[t].isEmpty()&&e--;return e}getLoopMode(){return this.loop}createSnapshot(){const e=[];for(let t=0;t<this.size.getWidth();t++){e[t]||(e[t]=[]);for(let i=0;i<this.size.getHeight();i++)e[t][i]=this.getCell(t,i)}return e}}t.Grid=o},3094:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationEvents=t.EndEvent=t.DeleteCellEvent=t.InsertCellEvent=t.Event=void 0;class i{constructor(){}}t.Event=i;class r extends i{constructor(e){super(),this.type=e}}t.InsertCellEvent=r;class n extends i{constructor(e){super(),this.type=e}}t.DeleteCellEvent=n,t.EndEvent=class extends i{constructor(e){super(),this.type=e}},t.SimulationEvents=class{constructor(){this.preStep=i,this.postStep=i,this.step=i,this.start=i,this.pause=i,this.deleteCell=n,this.insertCell=r,this.end=r}}},751:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSimulation=void 0;const r=i(4766),n=i(6469),s=i(4240),o=i(6567),a=i(1165),l=i(5573),c=i(6001);t.createSimulation=function(e,t){e=Object.assign({width:200,height:100,loop:c.GridLoopType.NONE,population:5,initialEnergy:70},e);const i=new s.CellFactory,h=new l.GridSize(e.width,e.height),u=new o.Simulation(h,e.loop,t,i);return function(e,t,i){const s=e.getCellFactory(),o=[];for(const{x:t,y:i,cell:r}of e.getGrid())r.isEmpty()&&o.push([t,i]);for(const[l,c]of(0,r.shuffle)(o).slice(0,t))e.getGrid().insert(l,c,s.createOrganism(n.Color.random(),a.Genome.createRandom(),i))}(u,Math.ceil(h.getCellCount()*e.population/100),e.initialEnergy),u}},1231:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationParams=void 0,t.SimulationParams=class{constructor(e={}){this.organismMaxLifetime=100,this.photosynthesisEnergy=2,this.organicEnergy=20;const t=t=>null!==e[t]&&void 0!==e[t];t("photosynthesisEnergy")&&this.setPhotosynthesisEnergy(e.photosynthesisEnergy),t("organismMaxLifetime")&&this.setOrganismMaxLifetime(e.organismMaxLifetime),t("organicEnergy")&&this.setOrganicEnergy(e.organicEnergy)}getOrganicEnergy(){return this.organicEnergy}setOrganicEnergy(e){this.organicEnergy=e}getOrganismMaxLifetime(){return this.organismMaxLifetime}setOrganismMaxLifetime(e){this.organismMaxLifetime=e}getPhotosynthesisEnergy(){return this.photosynthesisEnergy}setPhotosynthesisEnergy(e){this.photosynthesisEnergy=e}serialize(){return{photosynthesisEnergy:this.photosynthesisEnergy,organismMaxLifetime:this.organismMaxLifetime,organicEnergy:this.organicEnergy}}}},6567:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Simulation=void 0;const r=i(4591),n=i(3094),s=i(8928);t.Simulation=class{constructor(e,t,i,r){this.cellFactory=r,this.step=0,this.timeoutDelay=40,this.grid=new s.Grid(this,e,t,r),this.params=i,this.eventSubscribers={preStep:[],postStep:[],step:[],start:[],pause:[],deleteCell:[],insertCell:[],end:[]}}nextStep(){this.fireEvent("preStep");for(const{x:e,y:t,cell:i}of this.grid)i.isStatic()||i.update(new r.CellContext(this.grid,e,t,this.cellFactory),this.params);this.fireEvent("step"),this.step++,this.fireEvent("postStep")}start(){if(this.timeoutId)return;const e=this;this.timeoutId=setTimeout((function t(){e.nextStep(),e.timeoutId=setTimeout(t,e.timeoutDelay)}),this.timeoutDelay),this.fireEvent("start")}pause(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null,this.fireEvent("pause"))}getGrid(){return this.grid}getStep(){return this.step}getCellFactory(){return this.cellFactory}setTimeoutDelay(e){this.timeoutDelay=e}subscribe(e,t){this.eventSubscribers[e].push(t)}fireEvent(e,t){t=t||new n.Event,this.eventSubscribers[e].forEach((e=>e(t)))}getParams(){return this.params}end(){this.pause(),this.fireEvent("end")}}},9378:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=i(2766),n=i(7294),s=i(8804),o=i(2197),a=i(7244),l=i(1402),c=s.default.div`
    height: 100vh;
    background: #000;
    display: flex;
    color: #fff;
`;t.App=(0,r.observer)((()=>n.createElement(c,null,n.createElement(o.Flex,null,n.createElement(a.SimulationComponent,null),n.createElement(l.SidebarComponent,null)))))},2120:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const r=i(2766),n=i(7294),s=i(8804),o={default:{backgroundColor:"#000",boderColor:"#000",textColor:"#fff"},success:{backgroundColor:"#30b47b",boderColor:"#30b47b",textColor:"#fff"}},a=s.default.button`
    border: 1px solid black;
    background: black;
    color: #fff;
    border-radius: 10px;
    cursor: pointer;
    padding: 10px;
    ${({width:e})=>e&&`width: ${e};`}
    ${({apperance:e})=>{const t=o[e||"default"];return`border-color: ${t.boderColor};background-color: ${t.backgroundColor};color: ${t.textColor};`}}
`;t.Button=(0,r.observer)((e=>n.createElement(a,Object.assign({},e),e.children)))},1017:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const r=i(7294),n=i(8804).default.div`
    border-radius: 10px;
    background: #404042;
    padding: 15px;

    & + & {
        margin-top: 10px;
    }
`;t.Card=e=>r.createElement(n,Object.assign({},e),e.children)},8035:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ControlsCard=void 0;const r=i(2766),n=i(7294),s=i(7294),o=i(1997),a=i(2120),l=i(1017),c=i(7625),h=i(753),u=i(6043),d=i(9596),g=i(3363),p=i(6935),m=i(3540),f=i(1139),y=i(8863),v=i(4579),O=[{label:"Default",value:"default"},{label:"Genesis",value:"genesis"},{label:"Energy",value:"energy"}];t.ControlsCard=(0,r.observer)((()=>{const{simulationStore:e}=(0,s.useContext)(o.AppContext);return n.createElement(l.Card,null,n.createElement(m.FormRow,{label:"Map theme"},n.createElement(f.Select,{onSelect:t=>e.changeRenderTheme(t),options:O,value:e.getRenderTheme()})),n.createElement(v.Switch,{value:e.isRenderingDisabled(),label:"Disable rendering",onChange:t=>e.setRenderingDisabled(t)}),n.createElement(m.FormRow,{label:"Step delay"},n.createElement(y.RangeInput,{min:1,max:1e3,step:1,onChange:t=>e.changeStepDelay(t),value:e.getStepDelay()})),n.createElement(g.Row,null,n.createElement(p.Column,null,e.isPaused()&&n.createElement(a.Button,{apperance:"success",width:"100%",onClick:()=>e.start()},n.createElement(c.FontAwesomeIcon,{icon:h.faPlay})," Start"),!e.isPaused()&&n.createElement(a.Button,{width:"100%",onClick:()=>e.pause()},n.createElement(c.FontAwesomeIcon,{icon:u.faPause})," Pause")),e.isPaused()&&n.createElement(p.Column,{width:70},n.createElement(a.Button,{width:"100%",onClick:()=>e.makeStep()},n.createElement(c.FontAwesomeIcon,{icon:d.faForwardStep})))))}))},7308:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NewSimulationCard=void 0;const r=i(2766),n=i(7294),s=i(7294),o=i(1997),a=i(2120),l=i(1017),c=i(7625),h=i(2731),u=i(3363),d=i(6935),g=i(3540),p=i(1936),m=i(1139),f=i(8863),y=i(6001),v=[{label:"None",value:y.GridLoopType.NONE},{label:"Torus",value:y.GridLoopType.TORUS},{label:"Horizontal",value:y.GridLoopType.HORIZONTAL},{label:"Vertical",value:y.GridLoopType.VERTICAL}];t.NewSimulationCard=(0,r.observer)((()=>{const{simulationStore:e,UIStore:t}=(0,s.useContext)(o.AppContext),i=e.getOptions();return n.createElement(l.Card,null,t.getOptionsFormOpened()&&n.createElement(n.Fragment,null,n.createElement(g.FormRow,{label:"Grid width"},n.createElement(p.NumberInput,{min:0,onChange:e=>i.setWidth(e),value:i.getWidth()})),n.createElement(g.FormRow,{label:"Grid height"},n.createElement(p.NumberInput,{min:0,onChange:e=>i.setHeight(e),value:i.getHeight()})),n.createElement(g.FormRow,{label:"Loop"},n.createElement(m.Select,{onSelect:e=>i.setLoop(e),options:v,value:i.getLoop()})),n.createElement(g.FormRow,{label:`Population (${i.getPopulation()}%)`},n.createElement(f.RangeInput,{min:0,max:100,step:.1,onChange:e=>i.setPopulation(e),value:i.getPopulation()})),n.createElement(g.FormRow,{label:`Initial energy (${i.getInitialEnergy()})`},n.createElement(f.RangeInput,{min:0,max:100,step:1,onChange:e=>i.setInitialEnergy(e),value:i.getInitialEnergy()}))),n.createElement(u.Row,null,n.createElement(d.Column,null,n.createElement(a.Button,{width:"100%",onClick:()=>{e.newSimulation(),t.setOptionsFormOpened(!1)}},"New simulation")),n.createElement(d.Column,{width:60},n.createElement(a.Button,{width:"100%",onClick:()=>t.setOptionsFormOpened(!t.getOptionsFormOpened())},n.createElement(c.FontAwesomeIcon,{icon:h.faGear})))))}))},6993:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationParamsCard=void 0;const r=i(2766),n=i(7294),s=i(7294),o=i(1997),a=i(1017),l=i(3540),c=i(1936);t.SimulationParamsCard=(0,r.observer)((()=>{const{simulationStore:e}=(0,s.useContext)(o.AppContext),t=e.getParams();return n.createElement(a.Card,null,n.createElement(l.FormRow,{label:"Life time limit"},n.createElement(c.NumberInput,{onChange:e=>t.setOrganismMaxLifetime(e),value:t.getOrganismMaxLifetime(),min:0})),n.createElement(l.FormRow,{label:"Photosynthesis energy"},n.createElement(c.NumberInput,{onChange:e=>t.setPhotosynthesisEnergy(e),value:t.getPhotosynthesisEnergy(),min:0})),n.createElement(l.FormRow,{label:"Organic energy"},n.createElement(c.NumberInput,{onChange:e=>t.setOrganicEnergy(e),value:t.getOrganicEnergy(),min:0})))}))},4486:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatisticsCard=void 0;const r=i(2766),n=i(7294),s=i(7294),o=i(1997),a=i(1017);t.StatisticsCard=(0,r.observer)((()=>{const{simulationStore:e}=(0,s.useContext)(o.AppContext);return n.createElement(a.Card,null,n.createElement("div",null,"Step: ",e.getStep()),n.createElement("div",null,"Steps per second: ",e.getStepsPerSecond()),n.createElement("div",null,"Organisms: ",e.getOrganismCount()))}))},2197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Flex=void 0;const r=i(7294),n=i(8804).default.div`
    display: flex;
    flex-direction: ${e=>e.direction||"row"};
    justify-content: ${e=>e.justify||"stretch"};
    align-items: ${e=>e.align||"stretch"};
    flex-wrap: ${e=>e.wrap||"nowrap"};
    width: 100%;
`;t.Flex=e=>r.createElement(n,Object.assign({},e),e.children)},3540:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormRow=void 0;const r=i(7294),n=i(8804),s=n.default.div`
    margin-bottom: 15px;
`,o=n.default.label`
    margin-bottom: 5px;
    display: block;
    width: 100%;
`;t.FormRow=e=>r.createElement(s,null,e.label&&r.createElement(o,null,e.label),e.children)},1936:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumberInput=void 0;const r=i(7294),n=i(8804),s=i(6767),o=i(98),a=i(7625),l=n.default.input`
    width: 100%;
    background: #000;
    border: 2px solid #000;
    padding: 10px 60px 10px 10px;
    border-radius: 10px;
    color: #fff;
`,c=n.default.button`
    width: 20px;
    height: 20px;
    background: #30b47b;
    border: 2px solid #30b47b;
    border-radius: 100%;
    color: #fff;
    padding: 0;
    font-size: 14px;
    line-height: 1;
    margin-left: 5px;
`,h=(0,n.default)(c)`
    opacity: 0.5;
    cursor: default;
`,u=n.default.div`
    position: relative;
`,d=n.default.div`
    position: absolute;
    top: 11px;
    right: 10px;
`;t.NumberInput=e=>{const[t,i]=r.useState(e.value||0),n=t=>{void 0!==e.min&&t<e.min&&(t=e.min),void 0!==e.max&&t>e.max&&(t=e.max),i(t),e.onChange(t)};let g=r.createElement(c,{onClick:()=>n(t-1)},r.createElement(a.FontAwesomeIcon,{icon:s.faMinus})),p=r.createElement(c,{onClick:()=>n(t+1)},r.createElement(a.FontAwesomeIcon,{icon:o.faPlus}));return void 0!==e.min&&e.value<=e.min&&(g=r.createElement(h,null,r.createElement(a.FontAwesomeIcon,{icon:s.faMinus}))),void 0!==e.max&&e.value>=e.max&&(p=r.createElement(h,null,r.createElement(a.FontAwesomeIcon,{icon:o.faPlus}))),r.createElement(u,null,r.createElement(l,{type:"text",value:t,onChange:e=>(e=>{const t=Number(e);n(Number.isSafeInteger(t)?t:0)})(e.target.value)}),r.createElement(d,null,g,p))}},8863:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RangeInput=void 0;const r=i(7294),n=i(8804).default.input`
    width: 100%;
`;t.RangeInput=e=>r.createElement(n,{type:"range",min:e.min,max:e.max,step:e.step,value:e.value,onChange:t=>e.onChange(Number(t.target.value))})},1139:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;const r=i(7294),n=i(8804).default.select`
    width: 100%;
    background: #000;
    border: 2px solid #000;
    padding: 10px 10px;
    border-radius: 10px;
    color: #fff;
`;t.Select=e=>r.createElement(n,{onChange:t=>e.onSelect(t.target.value),value:e.value},e.options.map((({value:e,label:t},i)=>r.createElement("option",{value:e,key:i},t))))},4579:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0;const r=i(7294),n=i(8804),s=n.default.label`
    position: relative;
    display: flex;
    width: 100%;
    cursor: pointer;
    margin-bottom: 15px;
    align-items: center;
`,o=n.default.input`
    opacity: 0;
    width: 0;
    height: 0;

    &:checked + div {
        background-color: #30b47b;
    }

    &:checked + div:before {
        transform: translateX(26px);
    }
`,a=n.default.div`
    cursor: pointer;
    width: 60px;
    height: 34px;
    background-color: #000;
    border-radius: 34px;
    position: relative;
    margin-right: 10px;

    &:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background: #fff;
        transition: .4s;
        border-radius: 50%;
    }
`,l=n.default.span`
    flex: 1;
`;t.Switch=e=>r.createElement(s,null,r.createElement(o,{type:"checkbox",checked:e.value,onChange:t=>e.onChange(t.target.checked)}),r.createElement(a,null),r.createElement(l,null,e.label))},6935:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Column=void 0;const r=i(7294),n=i(8804).default.div`
    ${({width:e,size:t})=>e||t?null:"flex-grow: 1;"}
    ${({width:e,size:t})=>!e&&t?`width: calc(${t/12*100}%);`:null}
    ${({width:e})=>e?`width: ${e}px;`:null}
`;t.Column=e=>r.createElement(n,Object.assign({},e),e.children)},3363:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0;const r=i(7294),n=i(8804).default.div`
    display: flex;
    margin-left: -${e=>e.gutter/2+"px"};
    margin-right: -${e=>e.gutter/2+"px"};
    flex-wrap: wrap;

    & > * {
        padding: 0 ${e=>e.gutter/2+"px"};
    }
`;t.Row=e=>r.createElement(n,{gutter:e.gutter||10},e.children)},1402:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarComponent=void 0;const r=i(2766),n=i(7294),s=i(8804),o=i(8035),a=i(4486),l=i(7308),c=i(6993),h=s.default.div`
    width: 300px;
    padding: 10px;
    overflow-y: scroll;
`;t.SidebarComponent=(0,r.observer)((()=>n.createElement(h,null,n.createElement(a.StatisticsCard,null),n.createElement(o.ControlsCard,null),n.createElement(l.NewSimulationCard,null),n.createElement(c.SimulationParamsCard,null))))},7244:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationComponent=void 0;const r=i(7294),n=i(7294),s=i(2766),o=i(5560),a=i(1997),l=i(8804).default.div`
    flex: 1;
    height: 100%;
    overflow: hidden;
`;t.SimulationComponent=(0,s.observer)((()=>{const e=(0,n.useRef)(),[t,i,s]=(0,o.useSize)(),{simulationStore:c}=(0,n.useContext)(a.AppContext);return(0,n.useEffect)((()=>(c.setCanvas(e.current),()=>{})),[e.current]),r.createElement(l,{ref:s},r.createElement("canvas",{width:t,height:i,ref:e}))}))},1997:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppContext=void 0;const r=i(7294);t.AppContext=r.createContext(null)},5560:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSize=void 0;const r=i(7294);t.useSize=function(){const[e,t]=(0,r.useState)(0),[i,n]=(0,r.useState)(0),[s,o]=(0,r.useState)(),a=(0,r.useCallback)((e=>{if(e){t(e.getBoundingClientRect().width),n(e.getBoundingClientRect().height);const i=new ResizeObserver((e=>{for(let i of e){t(i.contentRect.width),n(i.contentRect.height);break}}));i.observe(e),o((()=>()=>i.disconnect()))}}),[]);return(0,r.useEffect)((()=>s),[s]),[e,i,a]}},711:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveOptions=t.loadOptions=void 0;t.loadOptions=function(){return function(e){let t=localStorage.getItem("evo_simulation_options"),i={};if("string"==typeof t){const e=JSON.parse(t);"object"==typeof e&&(i=e)}return i}()},t.saveOptions=function(e){var t;t=e,localStorage.setItem("evo_simulation_options",JSON.stringify(t))}},1096:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationOptionsStore=void 0;const n=i(8949),s=i(6001);class o{constructor(e){this.width=e.width||100,this.height=e.height||50,this.population=e.population||1,this.loop=e.loop||s.GridLoopType.NONE,this.initialEnergy=e.initialEnergy||70,(0,n.makeObservable)(this)}getWidth(){return this.width}setWidth(e){this.width=e}getHeight(){return this.height}setHeight(e){this.height=e}getLoop(){return this.loop}setLoop(e){this.loop=e}getPopulation(){return this.population}setPopulation(e){this.population=e}getParams(){return this.params}getInitialEnergy(){return this.initialEnergy}setInitialEnergy(e){this.initialEnergy=e}toGameOptions(){return{width:this.width,height:this.height,loop:this.loop,population:this.population,initialEnergy:this.initialEnergy}}}r([n.observable],o.prototype,"width",void 0),r([n.observable],o.prototype,"height",void 0),r([n.observable],o.prototype,"loop",void 0),r([n.observable],o.prototype,"population",void 0),r([n.observable],o.prototype,"initialEnergy",void 0),r([n.observable],o.prototype,"params",void 0),r([n.action],o.prototype,"setWidth",null),r([n.action],o.prototype,"setHeight",null),r([n.action],o.prototype,"setLoop",null),r([n.action],o.prototype,"setPopulation",null),r([n.action],o.prototype,"setInitialEnergy",null),t.SimulationOptionsStore=o},5345:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationParamsStore=void 0;const n=i(8949),s=i(1231);class o{constructor(){this.params=new s.SimulationParams,this.organismMaxLifetime=this.params.getOrganismMaxLifetime(),this.photosynthesisEnergy=this.params.getPhotosynthesisEnergy(),this.organicsEnergy=this.params.getOrganicEnergy(),(0,n.makeObservable)(this)}getOrganismMaxLifetime(){return this.organismMaxLifetime}setOrganismMaxLifetime(e){this.organismMaxLifetime=e,this.params.setOrganismMaxLifetime(e)}getPhotosynthesisEnergy(){return this.photosynthesisEnergy}setPhotosynthesisEnergy(e){this.photosynthesisEnergy=e,this.params.setPhotosynthesisEnergy(e)}getOrganicEnergy(){return this.organicsEnergy}setOrganicEnergy(e){this.organicsEnergy=e,this.params.setOrganicEnergy(e)}getGameParams(){return this.params}}r([n.observable],o.prototype,"organismMaxLifetime",void 0),r([n.observable],o.prototype,"photosynthesisEnergy",void 0),r([n.observable],o.prototype,"organicsEnergy",void 0),r([n.action],o.prototype,"setOrganismMaxLifetime",null),r([n.action],o.prototype,"setPhotosynthesisEnergy",null),r([n.action],o.prototype,"setOrganicEnergy",null),t.SimulationParamsStore=o},1548:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationStore=void 0;const n=i(8949),s=i(8173),o=i(711),a=i(1096),l=i(5345);class c{constructor(e,t){this.gameFactory=e,this.rendererTheme="default",this.renderingDisabled=!1,this.paused=!0,this.stepDelay=50,this.step=0,this.stepsPerSecond=0,this.stepsPreviusPeriod=0,this.organismCount=0,(0,n.makeObservable)(this),this.options=new a.SimulationOptionsStore(t),this.params=new l.SimulationParamsStore,this.newSimulation(),setInterval((()=>(0,n.runInAction)((()=>{this.stepsPerSecond=this.step-this.stepsPreviusPeriod,this.stepsPreviusPeriod=this.step}))),1e3)}newSimulation(){this.game&&this.game.end(),this.paused=!0,this.game=this.gameFactory(this.options.toGameOptions(),this.params.getGameParams()),this.game.setTimeoutDelay(this.stepDelay),this.newRenderer(),this.setRenderingDisabled(!1),this.step=0,this.stepsPreviusPeriod=0,this.stepsPerSecond=0,this.organismCount=0;for(const{cell:e}of this.game.getGrid())"organism"===e.getType()&&this.organismCount++;this.game.subscribe("postStep",(e=>(0,n.runInAction)((()=>{this.step=this.game.getStep()})))),this.game.subscribe("deleteCell",(e=>(0,n.runInAction)((()=>{"organism"===e.type&&this.organismCount--})))),this.game.subscribe("insertCell",(e=>(0,n.runInAction)((()=>{"organism"===e.type&&this.organismCount++})))),(0,o.saveOptions)(this.options.toGameOptions())}getGame(){return this.game}setCanvas(e){this.canvas||(this.canvas=e,this.newRenderer())}changeRenderTheme(e){this.rendererTheme=e,this.renderer&&this.renderer.setRenderStrategy(e)}getRenderTheme(){return this.rendererTheme}pause(){this.paused=!0,this.game&&this.game.pause()}start(){this.paused=!1,this.game&&this.game.start()}isPaused(){return this.paused}isRenderingDisabled(){return this.renderingDisabled}setRenderingDisabled(e){this.renderingDisabled=e,this.renderer&&(e?this.renderer.disableHandlingStep():this.renderer.enableHandlingStep())}changeStepDelay(e){this.stepDelay=e,this.game&&this.game.setTimeoutDelay(e)}getStepDelay(){return this.stepDelay}getStep(){return this.step}getStepsPerSecond(){return this.stepsPerSecond}getOrganismCount(){return this.organismCount}makeStep(){this.game&&this.game.nextStep()}getOptions(){return this.options}getParams(){return this.params}newRenderer(){this.game&&this.canvas&&(this.renderer=new s.CanvasRenderer(this.canvas,this.game,this.rendererTheme))}}r([n.observable],c.prototype,"rendererTheme",void 0),r([n.observable],c.prototype,"renderingDisabled",void 0),r([n.observable],c.prototype,"paused",void 0),r([n.observable],c.prototype,"stepDelay",void 0),r([n.observable],c.prototype,"step",void 0),r([n.observable],c.prototype,"stepsPerSecond",void 0),r([n.observable],c.prototype,"organismCount",void 0),r([n.observable],c.prototype,"options",void 0),r([n.observable],c.prototype,"params",void 0),r([n.action],c.prototype,"newSimulation",null),r([n.action],c.prototype,"changeRenderTheme",null),r([n.action],c.prototype,"pause",null),r([n.action],c.prototype,"start",null),r([n.action],c.prototype,"setRenderingDisabled",null),r([n.action],c.prototype,"changeStepDelay",null),t.SimulationStore=c},2291:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.UIStore=void 0;const n=i(8949);class s{constructor(){this.optionsFormOpened=!1,(0,n.makeObservable)(this)}getOptionsFormOpened(){return this.optionsFormOpened}setOptionsFormOpened(e){this.optionsFormOpened=e}}r([n.observable],s.prototype,"optionsFormOpened",void 0),r([n.action],s.prototype,"setOptionsFormOpened",null),t.UIStore=s},7698:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalStyle=void 0;const r=i(8804);t.GlobalStyle=r.createGlobalStyle`
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    body {
        margin: 0;
        font-family: monospace;
        font-size: 16px;
        text-transform: uppercase;
    }

    input,
    button,
    select,
    optgroup,
    textarea {
        margin: 0;
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
    }

    button {
        cursor: pointer;
    }
`}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var s=i[e]={exports:{}};return t[e].call(s.exports,s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,i,n,s)=>{if(!i){var o=1/0;for(h=0;h<e.length;h++){for(var[i,n,s]=e[h],a=!0,l=0;l<i.length;l++)(!1&s||o>=s)&&Object.keys(r.O).every((e=>r.O[e](i[l])))?i.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,n,s]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var n,s,[o,a,l]=i,c=0;if(o.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(l)var h=l(r)}for(t&&t(i);c<o.length;c++)s=o[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(h)},i=self.webpackChunkevo=self.webpackChunkevo||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=r.O(void 0,[736],(()=>r(2629)));n=r.O(n)})();