(()=>{"use strict";var t={904:function(t,e){var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AssertLessOrEqualThanError=e.AssertLessThanError=e.AssertGreaterOrEqualThanError=e.AssertGreaterThanError=e.AssertIntegerError=e.AssertError=e.assertLessOrEqualThan=e.assertLessThan=e.assertGreaterOrEqualThan=e.assertGreaterThan=e.assertInteger=void 0,e.assertInteger=function(t){if(!Number.isInteger(t))throw new o},e.assertGreaterThan=function(t,e){if(t<=e)throw new s},e.assertGreaterOrEqualThan=function(t,e){if(t<e)throw new a},e.assertLessThan=function(t,e){if(t>=e)throw new l},e.assertLessOrEqualThan=function(t,e){if(t>e)throw new u};var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);e.AssertError=i;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.AssertIntegerError=o;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.AssertGreaterThanError=s;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.AssertGreaterOrEqualThanError=a;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.AssertLessThanError=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.AssertLessOrEqualThanError=u},469:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(904),i=r(629),o=function(){function t(t,e,r){this.red=t,this.green=e,this.blue=r,(0,n.assertGreaterOrEqualThan)(t,0),(0,n.assertGreaterOrEqualThan)(e,0),(0,n.assertGreaterOrEqualThan)(r,0),(0,n.assertLessOrEqualThan)(t,255),(0,n.assertLessOrEqualThan)(e,255),(0,n.assertLessOrEqualThan)(r,255)}return t.prototype.getRed=function(){return this.red},t.prototype.getGreen=function(){return this.green},t.prototype.getBlue=function(){return this.blue},t.prototype.mix=function(e,r){return new t(Math.round(this.red*r+e.getRed()*(1-r)),Math.round(this.green*r+e.getGreen()*(1-r)),Math.round(this.blue*r+e.getBlue()*(1-r)))},t.prototype.toHexFormat=function(){if(this.hex)return this.hex;var t=function(t){return 1===t.length?"0"+t:t};return this.hex="#"+t(this.red.toString(16))+t(this.green.toString(16))+t(this.blue.toString(16))},t.random=function(){return new t((0,i.randomInt)(0,255),(0,i.randomInt)(0,255),(0,i.randomInt)(0,255))},t.fromHex=function(e){return e.startsWith("#")&&(e=e.slice(1)),new t(parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16))},t}();e.default=o},629:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randomInt=void 0,e.randomInt=function(t,e){var r=e-t+1;return Math.floor(Math.random()*r)+t}},386:function(t,e){var r=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},n=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r,n){this.grid=t,this.x=e,this.y=r,this.factory=n}return t.prototype.moveByOffest=function(t,e){var i,o=this.getCoordinatesbyOffset(t,e),s=this.grid.getCell(this.x,this.y);(i=this.grid).getCell.apply(i,n([],r(o),!1)).isEmpty()&&(this.grid.delete(this.x,this.y),this.grid.insert(o[0],o[1],s))},t.prototype.deleteByOffset=function(t,e){var i;(i=this.grid).delete.apply(i,n([],r(this.getCoordinatesbyOffset(t,e)),!1))},t.prototype.getByOffest=function(t,e){var i;return(i=this.grid).getCell.apply(i,n([],r(this.getCoordinatesbyOffset(t,e)),!1))},t.prototype.replace=function(t){this.grid.insert(this.x,this.y,t(this.factory))},t.prototype.getCoordinatesbyOffset=function(t,e){for(var r=this.grid.getSize(),n=this.x+t,i=this.y+e;n<0;)n+=r.getWidth();for(;i<0;)i+=r.getHeight();return[n%r.getWidth(),i%r.getHeight()]},t}();e.default=i},18:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(425),i=r(874),o=r(815),s=r(906),a=r(997),l=function(){function t(){}return t.prototype.createWall=function(){return this.wall?this.wall:this.wall=new a.WallCell},t.prototype.createEmpty=function(){return this.empty?this.empty:this.empty=new n.EmptyCell},t.prototype.createOrganism=function(t,e,r){return void 0===r&&(r=void 0),new o.OrganismCell(t,e,r)},t.prototype.createPlant=function(){return this.plant?this.plant:this.plant=new s.PlantCell},t.prototype.createMeat=function(){return this.meat?this.meat:this.meat=new i.MeatCell},t}();e.default=l},467:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.visitEmpty=function(t){},t.prototype.visitWall=function(t){},t.prototype.visitOrganism=function(t){},t.prototype.visitPlant=function(t){},t.prototype.visitMeat=function(t){},t}();e.default=r},211:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=void 0;var r=function(){function t(){}return t.prototype.update=function(t){},t.prototype.isStatic=function(){return!0},t.prototype.isEmpty=function(){return!1},t}();e.Cell=r},675:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=void 0,(r=e.Direction||(e.Direction={}))[r.NORTH=0]="NORTH",r[r.NORTH_EAST=1]="NORTH_EAST",r[r.NORTH_WEST=2]="NORTH_WEST",r[r.SOUTH=3]="SOUTH",r[r.SOUTH_EAST=4]="SOUTH_EAST",r[r.SOUTH_WEST=5]="SOUTH_WEST",r[r.EAST=6]="EAST",r[r.WEST=7]="WEST",function(t){t.getOffset=function(e){switch(e){case t.NORTH:return[0,-1];case t.NORTH_EAST:return[1,-1];case t.NORTH_WEST:return[-1,-1];case t.SOUTH:return[0,1];case t.SOUTH_EAST:return[1,1];case t.SOUTH_WEST:return[-1,1];case t.EAST:return[1,0];case t.WEST:return[-1,0]}},t.random=function(){var e=Object.keys(t).map((function(t){return Number.parseInt(t)})).filter((function(t){return!Number.isNaN(t)}));return e[Math.floor(Math.random()*e.length)]},t.rotateLeft=function(e){switch(e){case t.NORTH:return t.NORTH_WEST;case t.NORTH_EAST:return t.NORTH;case t.NORTH_WEST:return t.WEST;case t.SOUTH:return t.SOUTH_EAST;case t.SOUTH_EAST:return t.EAST;case t.SOUTH_WEST:return t.SOUTH;case t.EAST:return t.NORTH_EAST;case t.WEST:return t.SOUTH_WEST}},t.rotateRight=function(e){switch(e){case t.NORTH:return t.NORTH_EAST;case t.NORTH_EAST:return t.EAST;case t.NORTH_WEST:return t.NORTH;case t.SOUTH:return t.SOUTH_WEST;case t.SOUTH_EAST:return t.SOUTH;case t.SOUTH_WEST:return t.WEST;case t.EAST:return t.SOUTH_EAST;case t.WEST:return t.NORTH_WEST}}}(e.Direction||(e.Direction={}))},425:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyCell=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.visit=function(t){t.visitEmpty(this)},e.prototype.isEmpty=function(){return!0},e}(r(211).Cell);e.EmptyCell=o},4:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.WALL_TYPE=void 0;var i,o=r(469),s=r(18),a=r(188),l=r(816),u=r(828);!function(t){t.NONE="none",t.AROUND="around"}(i=e.WALL_TYPE||(e.WALL_TYPE={})),e.default=function(t){t=Object.assign({width:200,height:100,walls:i.NONE},t);var e=new s.default,r=new u.Size(t.width,t.height),c=new a.default(r,e);return function(t,e){var r,o,s=t.getGrid().getSize();if(e===i.AROUND)try{for(var a=n(t.getGrid()),l=a.next();!l.done;l=a.next()){var u=l.value,c=u.x,f=u.y;0!==c&&0!==f&&c!==s.getWidth()-1&&f!==s.getHeight()-1||t.getGrid().insert(c,f,t.getCellFactory().createWall())}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}}(c,t.walls),function(t){var e,r,i=t.getCellFactory();try{for(var s=n(t.getGrid()),a=s.next();!a.done;a=s.next()){var u=a.value,c=u.x,f=u.y;u.cell.isEmpty()&&Math.random()<.01&&t.getGrid().insert(c,f,i.createOrganism(o.default.random(),l.default.createRandom()))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}(c),c}},188:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GameEvents=void 0;var i=r(386),o=r(704),s=function(){};e.GameEvents=function(){this.preStep=s,this.postStep=s,this.step=s,this.start=s,this.pause=s};var a=function(){function t(t,e){this.cellFactory=e,this.step=0,this.timeoutDelay=40,this.grid=new o.default(t,e),this.eventSubscribers={preStep:[],postStep:[],step:[],start:[],pause:[]}}return t.prototype.generatePlants=function(){var t,e;if(0!==this.grid.countEmpty()){var r=this.grid.countEmpty()/this.grid.getSize().getCellCount()/100;try{for(var i=n(this.grid),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.x,l=s.y;s.cell.isEmpty()&&Math.random()<r&&this.grid.insert(a,l,this.cellFactory.createPlant())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}}},t.prototype.nextStep=function(){var t,e;this.fireEvent("preStep"),this.generatePlants();try{for(var r=n(this.grid),o=r.next();!o.done;o=r.next()){var s=o.value,a=s.x,l=s.y,u=s.cell;u.isStatic()||u.update(new i.default(this.grid,a,l,this.cellFactory))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.fireEvent("step"),this.step++,this.fireEvent("postStep")},t.prototype.start=function(){if(!this.timeoutId){var t=this;this.timeoutId=setTimeout((function e(){t.nextStep(),t.timeoutId=setTimeout(e,t.timeoutDelay)}),this.timeoutDelay),this.fireEvent("start")}},t.prototype.pause=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null,this.fireEvent("pause"))},t.prototype.getGrid=function(){return this.grid},t.prototype.getStep=function(){return this.step},t.prototype.getCellFactory=function(){return this.cellFactory},t.prototype.subscribe=function(t,e){this.eventSubscribers[t].push(e)},t.prototype.fireEvent=function(t){var e=this;this.eventSubscribers[t].forEach((function(t){return t(e)}))},t}();e.default=a},816:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var i,o=r(829);!function(t){t[t.EMPTY=0]="EMPTY",t[t.WALL=1]="WALL",t[t.PLANT=2]="PLANT",t[t.MEAT=3]="MEAT",t[t.ORGANISM_SIMILAR=4]="ORGANISM_SIMILAR",t[t.ORGANISM_OTHER=5]="ORGANISM_OTHER"}(i||(i={}));var s=function(){var t=Object.keys(o.OrganismAction).map((function(t){return Number.parseInt(t)})).filter((function(t){return!Number.isNaN(t)}));return t[Math.floor(Math.random()*t.length)]},a=function(t){return Math.floor(Math.random()*t)},l=function(){function t(t,e,r){void 0===r&&(r={}),this.mutationСhance=t,this.similarityLimit=e,this.reflexes=r}return t.prototype.getAction=function(t,e){var r,n=t.getEnergy()>50;if(e.visit({visitEmpty:function(t){r=i.EMPTY},visitWall:function(t){r=i.WALL},visitPlant:function(t){r=i.PLANT},visitMeat:function(t){r=i.MEAT},visitOrganism:function(e){r=t.isSimilar(e)?i.ORGANISM_SIMILAR:i.ORGANISM_OTHER}}),n&&r===i.EMPTY)return o.OrganismAction.DIVIDE;var s=this.reflexes["".concat(r)];return void 0===s||s===o.OrganismAction.DIVIDE&&!n?o.OrganismAction.NOTHING:s},t.prototype.compare=function(t){return 0},t.prototype.isSimilar=function(t){return this.compare(t)>=this.similarityLimit},t.prototype.clone=function(){var e,r,i=this.similarityLimit,o=this.mutationСhance,l={};try{for(var u=n(t.generateReflexKeys()),c=u.next();!c.done;c=u.next()){var f=c.value;l[f]=this.reflexes[f]}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(this.mutationСhance>a(100)){var h=a(8);if(0===h)o+=5*(1===a(2)?-1:1);else if(1===h)i+=5*(1===a(2)?-1:1);else if(h>=2){var p=t.generateReflexKeys();l[p[a(p.length)]]=s()}}return new t(o,i,l)},t.generateReflexKeys=function(){var t,e,r=Object.values(i).filter((function(t){return"number"==typeof t})),o=[];try{for(var s=n(r),a=s.next();!a.done;a=s.next()){var l=a.value;o.push("".concat(l))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return o},t.createRandom=function(){var e,r,i={};try{for(var o=n(t.generateReflexKeys()),a=o.next();!a.done;a=o.next())i[a.value]=s()}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return new t(Math.floor(100*Math.random()),Math.floor(100*Math.random()),i)},t}();e.default=l},189:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.cells=t,this.size=e,this.x=0,this.y=0}return t.prototype.next=function(){var t={cell:this.cells[this.x][this.y],x:this.x,y:this.y};return this.x++,this.x===this.size.getWidth()&&(this.x=0,this.y++),t},t.prototype.hasNext=function(){return this.y<this.size.getHeight()},t}();e.default=r},704:function(t,e,r){var n=this&&this.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(904),o=r(189),s=function(){function t(t,e){this.size=t,this.cellFactory=e,this.cells={}}return t.prototype[Symbol.iterator]=function(){var t;return n(this,(function(e){switch(e.label){case 0:t=new o.default(this.createSnapshot(),this.size),e.label=1;case 1:return t.hasNext()?[4,t.next()]:[3,3];case 2:return e.sent(),[3,1];case 3:return[2]}}))},t.prototype.getSize=function(){return this.size},t.prototype.insert=function(t,e,r){(0,i.assertLessThan)(t,this.size.getWidth()),(0,i.assertLessThan)(e,this.size.getHeight()),(0,i.assertGreaterOrEqualThan)(t,0),(0,i.assertGreaterOrEqualThan)(e,0),this.cells["".concat(t,":").concat(e)]=r},t.prototype.delete=function(t,e){delete this.cells["".concat(t,":").concat(e)]},t.prototype.getCell=function(t,e){return this.cells["".concat(t,":").concat(e)]||this.cellFactory.createEmpty()},t.prototype.countEmpty=function(){var t=this.size.getCellCount();for(var e in this.cells)this.cells[e].isEmpty()&&t--;return t},t.prototype.createSnapshot=function(){for(var t=[],e=0;e<this.size.getWidth();e++){t[e]||(t[e]=[]);for(var r=0;r<this.size.getHeight();r++)t[e][r]=this.getCell(e,r)}return t},t}();e.default=s},874:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MeatCell=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.visit=function(t){t.visitMeat(this)},e}(r(211).Cell);e.MeatCell=o},829:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.OrganismAction=void 0,(r=e.OrganismAction||(e.OrganismAction={}))[r.ROTATE_LEFT=0]="ROTATE_LEFT",r[r.ROTATE_RIGHT=1]="ROTATE_RIGHT",r[r.STEP=2]="STEP",r[r.ATTACK=3]="ATTACK",r[r.EAT=4]="EAT",r[r.DIVIDE=5]="DIVIDE",r[r.NOTHING=6]="NOTHING"},815:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OrganismCell=void 0;var a=r(211),l=r(467),u=r(675),c=r(829),f=function(t){function e(e,r,n){void 0===n&&(n=70);var i=t.call(this)||this;return i.color=e,i.genome=r,i.energy=n,i.lifetime=0,i.direction=u.Direction.random(),i}return i(e,t),e.prototype.getLifetime=function(){return this.lifetime},e.prototype.getEnergy=function(){return this.energy},e.prototype.getDirection=function(){return this.direction},e.prototype.getGenome=function(){return this.genome},e.prototype.visit=function(t){t.visitOrganism(this)},e.prototype.update=function(t){var e=this;if(this.lifetime>100||this.energy<=0)t.replace((function(t){return t.createMeat()}));else{var r=u.Direction.getOffset(this.direction),n=t.getByOffest.apply(t,s([],o(r),!1)),a=this.genome.getAction(this,n);if(a===c.OrganismAction.STEP)t.moveByOffest.apply(t,s([],o(r),!1)),this.changeEnergy(-1);else if(a===c.OrganismAction.ROTATE_LEFT)this.direction=u.Direction.rotateLeft(this.direction),this.changeEnergy(-1);else if(a===c.OrganismAction.ROTATE_RIGHT)this.direction=u.Direction.rotateLeft(this.direction),this.changeEnergy(-1);else if(a===c.OrganismAction.DIVIDE)n.isEmpty()&&(t.moveByOffest.apply(t,s([],o(r),!1)),this.changeEnergy(Math.floor(this.energy/-2)),t.replace((function(t){return t.createOrganism(e.color,e.genome.clone(),e.energy)})));else if(a===c.OrganismAction.ATTACK){var f=this;n.visit(new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.visitOrganism=function(t){t.kill(),f.changeEnergy(-1)},e}(l.default)))}else if(a===c.OrganismAction.EAT){var h=function(n){t.deleteByOffset.apply(t,s([],o(r),!1)),t.moveByOffest.apply(t,s([],o(r),!1)),e.changeEnergy(n)};n.visit(new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.visitMeat=function(t){h(20)},e.prototype.visitPlant=function(t){h(20)},e}(l.default)))}this.lifetime++}},e.prototype.changeEnergy=function(t){this.energy+=t,this.energy>100?this.energy=100:this.energy<0&&(this.energy=0)},e.prototype.kill=function(){this.energy=0},e.prototype.isStatic=function(){return!1},e.prototype.isSimilar=function(t){return this.genome.isSimilar(t.getGenome())},e.prototype.getColor=function(){return this.color},e}(a.Cell);e.OrganismCell=f},906:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlantCell=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.visit=function(t){t.visitPlant(this)},e}(r(211).Cell);e.PlantCell=o},828:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Size=void 0;var n=r(904),i=function(){function t(t,e){this.width=t,this.height=e,(0,n.assertGreaterOrEqualThan)(t,0),(0,n.assertGreaterOrEqualThan)(e,0)}return t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(e){return new t(e,this.height)},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){return new t(this.width,e)},t.prototype.getRatio=function(){return this.width/this.height},t.prototype.getCellCount=function(){return this.width*this.height},t}();e.Size=i},997:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.WallCell=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.visit=function(t){t.visitWall(this)},e}(r(211).Cell);e.WallCell=o},173:function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var i=r(489),o=r(717),s=r(601),a=function(){function t(t,e,r){this.canvas=t,this.game=e,this.context=t.getContext("2d"),this.setRenderStrategy(r)}return t.prototype.render=function(){var t,e;if(this.renderStrategy){var r,i,o=this.game.getGrid().getSize().getRatio(),s=[0,0];o>this.canvas.width/this.canvas.height?(r=this.canvas.width,i=this.canvas.width/o,s[1]=(this.canvas.height-i)/2):(r=this.canvas.height*o,i=this.canvas.height,s[0]=(this.canvas.width-r)/2);var a=r/this.game.getGrid().getSize().getWidth();try{for(var l=n(this.game.getGrid()),u=l.next();!u.done;u=l.next()){var c=u.value,f=c.x,h=c.y,p=c.cell,y=s[0]+f*a,d=s[1]+h*a;p.visit(this.renderStrategy.createVisitor(y,d,a))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}}},t.prototype.setRenderStrategy=function(t){"none"===t?this.renderStrategy=null:"default"===t?this.renderStrategy=new i.default(this.context):"energy"===t?this.renderStrategy=new o.default(this.context):"genesis"===t&&(this.renderStrategy=new s.default(this.context))},t}();e.default=a},489:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(675),i=function(){function t(t,e){this.context=t,this.styles=e,this.styles=Object.assign({CELL_WALL_COLOR:"#5f5f5f",CELL_ORGANISM_COLOR:"#0B5FA5",CELL_ORGANISM_EYE_COLOR:"#66A1D2",CELL_EMPTY_COLOR:"#000000",CELL_PLANT_COLOR:"#399200",CELL_MEAT_COLOR:"#FE7276"},e)}return t.prototype.createVisitor=function(t,e,r){var i=this;return{visitEmpty:function(n){i.context.fillStyle=i.styles.CELL_EMPTY_COLOR,i.context.fillRect(t,e,r,r)},visitWall:function(n){i.context.fillStyle=i.styles.CELL_WALL_COLOR,i.context.fillRect(t,e,r,r)},visitPlant:function(n){i.context.fillStyle=i.styles.CELL_PLANT_COLOR,i.context.fillRect(t,e,r,r)},visitMeat:function(n){i.context.fillStyle=i.styles.CELL_MEAT_COLOR,i.context.fillRect(t,e,r,r)},visitOrganism:function(o){i.context.fillStyle=i.styles.CELL_ORGANISM_COLOR,i.context.fillRect(t,e,r,r);var s,a=r/3;switch(o.getDirection()){case n.Direction.NORTH_WEST:s=[0,0];break;case n.Direction.NORTH:s=[a,0];break;case n.Direction.NORTH_EAST:s=[2*a,0];break;case n.Direction.SOUTH_WEST:s=[0,2*a];break;case n.Direction.SOUTH:s=[a,2*a];break;case n.Direction.SOUTH_EAST:s=[2*a,2*a];break;case n.Direction.WEST:s=[0,a];break;case n.Direction.EAST:s=[2*a,a]}i.context.fillStyle=i.styles.CELL_ORGANISM_EYE_COLOR,i.context.fillRect(t+s[0],e+s[1],a,a)}}},t}();e.default=i},717:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(469),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createVisitor=function(t,e,r){var n=this;return{visitEmpty:function(i){n.context.fillStyle=n.styles.CELL_EMPTY_COLOR,n.context.fillRect(t,e,r,r)},visitWall:function(i){n.context.fillStyle=n.styles.CELL_WALL_COLOR,n.context.fillRect(t,e,r,r)},visitPlant:function(i){n.context.fillStyle=n.styles.CELL_EMPTY_COLOR,n.context.fillRect(t,e,r,r)},visitMeat:function(i){n.context.fillStyle=n.styles.CELL_EMPTY_COLOR,n.context.fillRect(t,e,r,r)},visitOrganism:function(i){var s=i.getEnergy();n.context.fillStyle=o.default.fromHex("#ffff00").mix(o.default.fromHex("#ff0000"),s/100).toHexFormat(),n.context.fillRect(t,e,r,r)}}},e}(r(489).default);e.default=s},601:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createVisitor=function(e,r,n){var i=this,o=t.prototype.createVisitor.call(this,e,r,n);return o.visitOrganism=function(t){i.context.fillStyle=t.getColor().toHexFormat(),i.context.fillRect(e,r,n,n)},o},e}(r(489).default);e.default=o}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}(()=>{var t=r(4),e=r(173),n=document.getElementById("canvas"),i=document.getElementById("canvas-container");function o(t,e){t.setAttribute("width",e.clientWidth.toString()),t.setAttribute("height",e.clientHeight.toString())}o(n,i);var s=(0,t.default)({walls:t.WALL_TYPE.AROUND}),a=new e.default(n,s,"default");a.render(),s.subscribe("step",(function(t){a.render()})),s.start(),window.addEventListener("resize",(function(){o(n,i),a.render()})),document.getElementById("map_theme").addEventListener("change",(function(t){a.setRenderStrategy(t.target.value)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TixZQUd6RG9OLEVBQVVsQyxFQUFRaUMsR0FFbEIsSUFBTTFILEdBQU8sYUFBVyxDQUNwQkosTUFBTyxFQUFBTCxVQUFVWSxTQUdmNkgsRUFBVyxJQUFJLFVBQWV2QyxFQUFRekYsRUFBTSxXQUNsRGdJLEVBQVNuQyxTQUVUN0YsRUFBSzRCLFVBQVUsUUFBUSxTQUFDNUIsR0FDcEJnSSxFQUFTbkMsWUFHYjdGLEVBQUthLFFBRUxvSCxPQUFPQyxpQkFBaUIsVUFBVSxXQUM5QlAsRUFBVWxDLEVBQVFpQyxHQUNsQk0sRUFBU25DLFlBR2IyQixTQUFTQyxlQUFlLGFBQWFTLGlCQUFpQixVQUFVLFNBQUNDLEdBQzdESCxFQUFTcEMsa0JBQW9CdUMsRUFBRXJFLE9BQWtDLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldm8vLi9zcmMvY29tbW9uL2Fzc2VydHMudHMiLCJ3ZWJwYWNrOi8vZXZvLy4vc3JjL2NvbW1vbi9jb2xvci50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvY29tbW9uL3JhbmRvbS50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS9jZWxsLWNvbnRleHQudHMiLCJ3ZWJwYWNrOi8vZXZvLy4vc3JjL2dhbWUvY2VsbC1mYWN0b3J5LnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL2NlbGwtdmlzaXRvci50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS9jZWxsLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL2RpcmVjdGlvbi50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS9lbXB0eS1jZWxsLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL2dhbWUtZmFjdG9yeS50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS9nYW1lLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL2dlbm9tZS50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS9ncmlkLWl0ZXJhdG9yLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL2dyaWQudHMiLCJ3ZWJwYWNrOi8vZXZvLy4vc3JjL2dhbWUvbWVhdC1jZWxsLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL29yZ2FuaXNtLWFjdGlvbi50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS9vcmdhbmlzbS1jZWxsLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9nYW1lL3BsYW50LWNlbGwudHMiLCJ3ZWJwYWNrOi8vZXZvLy4vc3JjL2dhbWUvc2l6ZS50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvZ2FtZS93YWxsLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9yZW5kZXIvY2FudmFzLXJlbmRlcmVyLnRzIiwid2VicGFjazovL2V2by8uL3NyYy9yZW5kZXIvc3RyYXRlZ3kvZGVmYXVsdC1zdHJhdGVneS50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvcmVuZGVyL3N0cmF0ZWd5L2VuZXJneS1zdHJhdGVneS50cyIsIndlYnBhY2s6Ly9ldm8vLi9zcmMvcmVuZGVyL3N0cmF0ZWd5L2dlbmVzaXMtc3RyYXRlZ3kudHMiLCJ3ZWJwYWNrOi8vZXZvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V2by8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gYXNzZXJ0SW50ZWdlcih2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKCEgTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydEludGVnZXJFcnJvcjtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRHcmVhdGVyVGhhbih2YWx1ZTogYW55LCBjb21wYXJlZFZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodmFsdWUgPD0gY29tcGFyZWRWYWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0R3JlYXRlclRoYW5FcnJvcjtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRHcmVhdGVyT3JFcXVhbFRoYW4odmFsdWU6IGFueSwgY29tcGFyZWRWYWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKHZhbHVlIDwgY29tcGFyZWRWYWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuRXJyb3I7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TGVzc1RoYW4odmFsdWU6IGFueSwgY29tcGFyZWRWYWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKHZhbHVlID49IGNvbXBhcmVkVmFsdWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydExlc3NUaGFuRXJyb3I7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TGVzc09yRXF1YWxUaGFuKHZhbHVlOiBhbnksIGNvbXBhcmVkVmFsdWU6IGFueSk6IHZvaWQge1xuICAgIGlmICh2YWx1ZSA+IGNvbXBhcmVkVmFsdWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydExlc3NPckVxdWFsVGhhbkVycm9yO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFzc2VydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXG59XG5cbmV4cG9ydCBjbGFzcyBBc3NlcnRJbnRlZ2VyRXJyb3IgZXh0ZW5kcyBBc3NlcnRFcnJvciB7XG4gICAgXG59XG5cbmV4cG9ydCBjbGFzcyBBc3NlcnRHcmVhdGVyVGhhbkVycm9yIGV4dGVuZHMgQXNzZXJ0RXJyb3Ige1xuICAgIFxufVxuXG5leHBvcnQgY2xhc3MgQXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuRXJyb3IgZXh0ZW5kcyBBc3NlcnRFcnJvciB7XG4gICAgXG59XG5cbmV4cG9ydCBjbGFzcyBBc3NlcnRMZXNzVGhhbkVycm9yIGV4dGVuZHMgQXNzZXJ0RXJyb3Ige1xuICAgIFxufVxuXG5leHBvcnQgY2xhc3MgQXNzZXJ0TGVzc09yRXF1YWxUaGFuRXJyb3IgZXh0ZW5kcyBBc3NlcnRFcnJvciB7XG4gICAgXG59IiwiaW1wb3J0IHsgYXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuLCBhc3NlcnRMZXNzT3JFcXVhbFRoYW4gfSBmcm9tIFwiLi9hc3NlcnRzXCI7XG5pbXBvcnQgeyByYW5kb21JbnQgfSBmcm9tIFwiLi9yYW5kb21cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3Ige1xuICAgIHByaXZhdGUgaGV4OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWQ6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBncmVlbjogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIGJsdWU6IG51bWJlclxuICAgICkge1xuICAgICAgICBhc3NlcnRHcmVhdGVyT3JFcXVhbFRoYW4ocmVkLCAwKTtcbiAgICAgICAgYXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuKGdyZWVuLCAwKTtcbiAgICAgICAgYXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuKGJsdWUsIDApO1xuXG4gICAgICAgIGFzc2VydExlc3NPckVxdWFsVGhhbihyZWQsIDI1NSk7XG4gICAgICAgIGFzc2VydExlc3NPckVxdWFsVGhhbihncmVlbiwgMjU1KTtcbiAgICAgICAgYXNzZXJ0TGVzc09yRXF1YWxUaGFuKGJsdWUsIDI1NSk7XG4gICAgfVxuXG4gICAgZ2V0UmVkKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZDtcbiAgICB9XG5cbiAgICBnZXRHcmVlbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmVlbjtcbiAgICB9XG5cbiAgICBnZXRCbHVlKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdWU7XG4gICAgfVxuXG4gICAgbWl4KHRvOiBDb2xvciwgcGVyY2VudDogbnVtYmVyKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLnJlZCAqIHBlcmNlbnQgKyB0by5nZXRSZWQoKSAqICgxIC0gcGVyY2VudCkpLFxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLmdyZWVuICogcGVyY2VudCArIHRvLmdldEdyZWVuKCkgKiAoMSAtIHBlcmNlbnQpKSxcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5ibHVlICogcGVyY2VudCArIHRvLmdldEJsdWUoKSAqICgxIC0gcGVyY2VudCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdG9IZXhGb3JtYXQoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuaGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWdlbWVudCA9ICh2OiBzdHJpbmcpID0+IHYubGVuZ3RoID09PSAxID8gJzAnICsgdiA6IHY7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaGV4ID0gJyMnXG4gICAgICAgICAgICArIHNlZ2VtZW50KHRoaXMucmVkLnRvU3RyaW5nKDE2KSlcbiAgICAgICAgICAgICsgc2VnZW1lbnQodGhpcy5ncmVlbi50b1N0cmluZygxNikpXG4gICAgICAgICAgICArIHNlZ2VtZW50KHRoaXMuYmx1ZS50b1N0cmluZygxNikpO1xuICAgIH1cblxuICAgIHN0YXRpYyByYW5kb20oKTogQ29sb3Ige1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKHJhbmRvbUludCgwLCAyNTUpLCByYW5kb21JbnQoMCwgMjU1KSwgcmFuZG9tSW50KDAsIDI1NSkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tSGV4KHZhbHVlOiBzdHJpbmcpOiBDb2xvciB7XG4gICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByID0gcGFyc2VJbnQodmFsdWUuc2xpY2UoMCwgMiksIDE2KTtcbiAgICAgICAgY29uc3QgZyA9IHBhcnNlSW50KHZhbHVlLnNsaWNlKDIsIDQpLCAxNik7XG4gICAgICAgIGNvbnN0IGIgPSBwYXJzZUludCh2YWx1ZS5zbGljZSg0LCA2KSwgMTYpO1xuXG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IociwgZywgYik7XG4gICAgfVxufSIsImV4cG9ydCBmdW5jdGlvbiByYW5kb21JbnQoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSB7XG4gICAgY29uc3QgZGVsdGEgPSB0byAtIGZyb20gKyAxO1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkZWx0YSkgKyBmcm9tO1xufSIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9jZWxsXCI7XG5pbXBvcnQgQ2VsbEZhY3RvcnkgZnJvbSBcIi4vY2VsbC1mYWN0b3J5XCI7XG5pbXBvcnQgR3JpZCBmcm9tIFwiLi9ncmlkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENlbGxDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBncmlkOiBHcmlkLFxuICAgICAgICBwcml2YXRlIHg6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSB5OiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgZmFjdG9yeTogQ2VsbEZhY3RvcnlcbiAgICApIHtcblxuICAgIH1cblxuICAgIG1vdmVCeU9mZmVzdCh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBjb29yZGluYXRlcyA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXNieU9mZnNldCh4LCB5KTtcblxuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5ncmlkLmdldENlbGwodGhpcy54LCB0aGlzLnkpO1xuICAgICAgICBjb25zdCBuZXh0Q2VsbCA9IHRoaXMuZ3JpZC5nZXRDZWxsKC4uLmNvb3JkaW5hdGVzKTtcblxuICAgICAgICBpZiAobmV4dENlbGwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB0aGlzLmdyaWQuZGVsZXRlKHRoaXMueCwgdGhpcy55KTtcbiAgICAgICAgICAgIHRoaXMuZ3JpZC5pbnNlcnQoY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdLCBjZWxsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZUJ5T2Zmc2V0KHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ3JpZC5kZWxldGUoLi4udGhpcy5nZXRDb29yZGluYXRlc2J5T2Zmc2V0KHgsIHkpKTtcbiAgICB9XG5cbiAgICBnZXRCeU9mZmVzdCh4OiBudW1iZXIsIHk6IG51bWJlcik6IENlbGwge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmlkLmdldENlbGwoLi4udGhpcy5nZXRDb29yZGluYXRlc2J5T2Zmc2V0KHgsIHkpKTtcbiAgICB9XG5cbiAgICByZXBsYWNlKGNyZWF0ZUNlbGw6IChmYWN0b3J5OiBDZWxsRmFjdG9yeSkgPT4gQ2VsbCkge1xuICAgICAgICB0aGlzLmdyaWQuaW5zZXJ0KHRoaXMueCwgdGhpcy55LCBjcmVhdGVDZWxsKHRoaXMuZmFjdG9yeSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q29vcmRpbmF0ZXNieU9mZnNldCh4OiBudW1iZXIsIHk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBjb25zdCBzaXplID0gdGhpcy5ncmlkLmdldFNpemUoKTtcblxuICAgICAgICBsZXQgcmVzdWx0WCA9IHRoaXMueCArIHg7XG4gICAgICAgIGxldCByZXN1bHRZID0gdGhpcy55ICsgeTtcblxuICAgICAgICB3aGlsZSAocmVzdWx0WCA8IDApIHtcbiAgICAgICAgICAgIHJlc3VsdFggKz0gc2l6ZS5nZXRXaWR0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKHJlc3VsdFkgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHRZICs9IHNpemUuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW3Jlc3VsdFggJSBzaXplLmdldFdpZHRoKCksIHJlc3VsdFkgJSBzaXplLmdldEhlaWdodCgpXTtcbiAgICB9XG59IiwiaW1wb3J0IENvbG9yIGZyb20gXCIuLi9jb21tb24vY29sb3JcIjtcbmltcG9ydCB7IEVtcHR5Q2VsbCB9IGZyb20gXCIuL2VtcHR5LWNlbGxcIjtcbmltcG9ydCBHZW5vbWUgZnJvbSBcIi4vZ2Vub21lXCI7XG5pbXBvcnQgeyBNZWF0Q2VsbCB9IGZyb20gXCIuL21lYXQtY2VsbFwiO1xuaW1wb3J0IHsgT3JnYW5pc21DZWxsIH0gZnJvbSBcIi4vb3JnYW5pc20tY2VsbFwiO1xuaW1wb3J0IHsgUGxhbnRDZWxsIH0gZnJvbSBcIi4vcGxhbnQtY2VsbFwiO1xuaW1wb3J0IHsgV2FsbENlbGwgfSBmcm9tIFwiLi93YWxsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENlbGxGYWN0b3J5IHtcbiAgICBwcml2YXRlIHdhbGw6IFdhbGxDZWxsO1xuXG4gICAgcHJpdmF0ZSBlbXB0eTogRW1wdHlDZWxsO1xuXG4gICAgcHJpdmF0ZSBwbGFudDogUGxhbnRDZWxsO1xuXG4gICAgcHJpdmF0ZSBtZWF0OiBNZWF0Q2VsbDtcblxuICAgIGNyZWF0ZVdhbGwoKTogV2FsbENlbGwge1xuICAgICAgICBpZiAodGhpcy53YWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53YWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2FsbCA9IG5ldyBXYWxsQ2VsbCgpO1xuICAgIH1cblxuICAgIGNyZWF0ZUVtcHR5KCk6IEVtcHR5Q2VsbCB7XG4gICAgICAgIGlmICh0aGlzLmVtcHR5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbXB0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmVtcHR5ID0gbmV3IEVtcHR5Q2VsbCgpO1xuICAgIH1cblxuICAgIGNyZWF0ZU9yZ2FuaXNtKGNvbG9yOiBDb2xvciwgZ2Vub21lOiBHZW5vbWUsIGVuZXJneTogbnVtYmVyID0gdW5kZWZpbmVkKTogT3JnYW5pc21DZWxsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPcmdhbmlzbUNlbGwoY29sb3IsIGdlbm9tZSwgZW5lcmd5KTtcbiAgICB9XG5cbiAgICBjcmVhdGVQbGFudCgpOiBQbGFudENlbGwge1xuICAgICAgICBpZiAodGhpcy5wbGFudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wbGFudCA9IG5ldyBQbGFudENlbGwoKTtcbiAgICB9XG5cbiAgICBjcmVhdGVNZWF0KCk6IE1lYXRDZWxsIHtcbiAgICAgICAgaWYgKHRoaXMubWVhdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVhdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm1lYXQgPSBuZXcgTWVhdENlbGwoKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgRW1wdHlDZWxsIH0gZnJvbSBcIi4vZW1wdHktY2VsbFwiO1xuaW1wb3J0IHsgTWVhdENlbGwgfSBmcm9tIFwiLi9tZWF0LWNlbGxcIjtcbmltcG9ydCB7IE9yZ2FuaXNtQ2VsbCB9IGZyb20gXCIuL29yZ2FuaXNtLWNlbGxcIjtcbmltcG9ydCB7IFBsYW50Q2VsbCB9IGZyb20gXCIuL3BsYW50LWNlbGxcIjtcbmltcG9ydCB7IFdhbGxDZWxsIH0gZnJvbSBcIi4vd2FsbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDZWxsVmlzaXRvciB7XG4gICAgdmlzaXRFbXB0eShjZWxsOiBFbXB0eUNlbGwpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgfVxuICAgIHZpc2l0V2FsbChjZWxsOiBXYWxsQ2VsbCk6IHZvaWQge1xuICAgICAgICBcbiAgICB9XG4gICAgdmlzaXRPcmdhbmlzbShjZWxsOiBPcmdhbmlzbUNlbGwpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgfVxuICAgIHZpc2l0UGxhbnQoY2VsbDogUGxhbnRDZWxsKTogdm9pZCB7XG4gICAgICAgIFxuICAgIH1cbiAgICB2aXNpdE1lYXQoY2VsbDogTWVhdENlbGwpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgfVxufSIsImltcG9ydCBDZWxsQ29udGV4dCBmcm9tIFwiLi9jZWxsLWNvbnRleHRcIjtcbmltcG9ydCBDZWxsVmlzaXRvciBmcm9tIFwiLi9jZWxsLXZpc2l0b3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENlbGwge1xuICAgIGFic3RyYWN0IHZpc2l0KHZpc2l0b3I6IENlbGxWaXNpdG9yKTogdm9pZDtcblxuICAgIHVwZGF0ZShjb250ZXh0OiBDZWxsQ29udGV4dCk6IHZvaWQge1xuICAgICAgICBcbiAgICB9XG5cbiAgICBpc1N0YXRpYygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0iLCJleHBvcnQgZW51bSBEaXJlY3Rpb24ge1xuICAgIE5PUlRIID0gMCxcbiAgICBOT1JUSF9FQVNUID0gMSxcbiAgICBOT1JUSF9XRVNUID0gMixcbiAgICBTT1VUSCA9IDMsXG4gICAgU09VVEhfRUFTVCA9IDQsXG4gICAgU09VVEhfV0VTVCA9IDUsXG4gICAgRUFTVCA9IDYsXG4gICAgV0VTVCA9IDcsXG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRGlyZWN0aW9uIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0T2Zmc2V0KGRpcmVjdGlvbjogRGlyZWN0aW9uKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5OT1JUSDogcmV0dXJuIFswLCAtMV07XG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5OT1JUSF9FQVNUOiByZXR1cm4gWzEsIC0xXTtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLk5PUlRIX1dFU1Q6IHJldHVybiBbLTEsIC0xXTtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlNPVVRIOiByZXR1cm4gWzAsIDFdO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uU09VVEhfRUFTVDogcmV0dXJuIFsxLCAxXTtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlNPVVRIX1dFU1Q6IHJldHVybiBbLTEsIDFdO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uRUFTVDogcmV0dXJuIFsxLCAwXTtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLldFU1Q6IHJldHVybiBbLTEsIDBdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbSgpOiBEaXJlY3Rpb24ge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0gT2JqZWN0LmtleXMoRGlyZWN0aW9uKVxuICAgICAgICAgICAgLm1hcChuID0+IE51bWJlci5wYXJzZUludChuKSlcbiAgICAgICAgICAgIC5maWx0ZXIobiA9PiAhTnVtYmVyLmlzTmFOKG4pKSBhcyB1bmtub3duIGFzIERpcmVjdGlvbltdO1xuXG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVudW1WYWx1ZXMubGVuZ3RoKV07XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUxlZnQoZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiBEaXJlY3Rpb24ge1xuICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uTk9SVEg6IHJldHVybiBEaXJlY3Rpb24uTk9SVEhfV0VTVDtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLk5PUlRIX0VBU1Q6IHJldHVybiBEaXJlY3Rpb24uTk9SVEg7XG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5OT1JUSF9XRVNUOiByZXR1cm4gRGlyZWN0aW9uLldFU1Q7XG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5TT1VUSDogcmV0dXJuIERpcmVjdGlvbi5TT1VUSF9FQVNUO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uU09VVEhfRUFTVDogcmV0dXJuIERpcmVjdGlvbi5FQVNUO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uU09VVEhfV0VTVDogcmV0dXJuIERpcmVjdGlvbi5TT1VUSDtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkVBU1Q6IHJldHVybiBEaXJlY3Rpb24uTk9SVEhfRUFTVDtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLldFU1Q6IHJldHVybiBEaXJlY3Rpb24uU09VVEhfV0VTVDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiByb3RhdGVSaWdodChkaXJlY3Rpb246IERpcmVjdGlvbik6IERpcmVjdGlvbiB7XG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5OT1JUSDogcmV0dXJuIERpcmVjdGlvbi5OT1JUSF9FQVNUO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uTk9SVEhfRUFTVDogcmV0dXJuIERpcmVjdGlvbi5FQVNUO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uTk9SVEhfV0VTVDogcmV0dXJuIERpcmVjdGlvbi5OT1JUSDtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlNPVVRIOiByZXR1cm4gRGlyZWN0aW9uLlNPVVRIX1dFU1Q7XG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5TT1VUSF9FQVNUOiByZXR1cm4gRGlyZWN0aW9uLlNPVVRIO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uU09VVEhfV0VTVDogcmV0dXJuIERpcmVjdGlvbi5XRVNUO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uRUFTVDogcmV0dXJuIERpcmVjdGlvbi5TT1VUSF9FQVNUO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uV0VTVDogcmV0dXJuIERpcmVjdGlvbi5OT1JUSF9XRVNUO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9jZWxsXCI7XG5pbXBvcnQgY2VsbFZpc2l0b3IgZnJvbSBcIi4vY2VsbC12aXNpdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBFbXB0eUNlbGwgZXh0ZW5kcyBDZWxsIHtcbiAgICB2aXNpdCh2aXNpdG9yOiBjZWxsVmlzaXRvcik6IHZvaWQge1xuICAgICAgICB2aXNpdG9yLnZpc2l0RW1wdHkodGhpcyk7XG4gICAgfVxuXG5cbiAgICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59IiwiaW1wb3J0IENvbG9yIGZyb20gXCIuLi9jb21tb24vY29sb3JcIjtcbmltcG9ydCBDZWxsRmFjdG9yeSBmcm9tIFwiLi9jZWxsLWZhY3RvcnlcIjtcbmltcG9ydCBHYW1lIGZyb20gXCIuL2dhbWVcIjtcbmltcG9ydCBHZW5vbWUgZnJvbSBcIi4vZ2Vub21lXCI7XG5pbXBvcnQgeyBTaXplIH0gZnJvbSBcIi4vc2l6ZVwiO1xuXG5leHBvcnQgZW51bSBXQUxMX1RZUEUge1xuICAgIE5PTkUgPSAnbm9uZScsXG4gICAgQVJPVU5EID0gJ2Fyb3VuZCdcbn0gXG5cbmV4cG9ydCB0eXBlIEdhbWVPcHRpb25zID0ge1xuICAgIHdpZHRoPzogbnVtYmVyLFxuICAgIGhlaWdodD86IG51bWJlcixcbiAgICB3YWxscz86IFdBTExfVFlQRVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVHYW1lKG9wdGlvbnM/OiBHYW1lT3B0aW9ucyk6IEdhbWUge1xuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgd2lkdGg6IDIwMCxcbiAgICAgICAgaGVpZ2h0OiAxMDAsXG4gICAgICAgIHdhbGxzOiBXQUxMX1RZUEUuTk9ORSxcbiAgICB9LCBvcHRpb25zKVxuXG4gICAgY29uc3QgY2VsbEZhY3RvcnkgPSBuZXcgQ2VsbEZhY3RvcnkoKTtcbiAgICBjb25zdCBzaXplID0gbmV3IFNpemUob3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQpO1xuICAgIGNvbnN0IGdhbWUgPSBuZXcgR2FtZShzaXplLCBjZWxsRmFjdG9yeSk7XG5cbiAgICBtYWtlV2FsbHMoZ2FtZSwgb3B0aW9ucy53YWxscyk7XG4gICAgc3Bhd25PcmdhbmlzbXMoZ2FtZSk7XG5cbiAgICByZXR1cm4gZ2FtZTtcbn1cblxuZnVuY3Rpb24gc3Bhd25PcmdhbmlzbXMoZ2FtZTogR2FtZSk6IHZvaWQge1xuICAgIGNvbnN0IGNlbGxGYWN0b3J5ID0gZ2FtZS5nZXRDZWxsRmFjdG9yeSgpO1xuXG4gICAgZm9yIChjb25zdCB7eCwgeSwgY2VsbH0gb2YgZ2FtZS5nZXRHcmlkKCkpIHtcbiAgICAgICAgaWYgKGNlbGwuaXNFbXB0eSgpICYmIE1hdGgucmFuZG9tKCkgPCAwLjAxKSB7XG4gICAgICAgICAgICBnYW1lLmdldEdyaWQoKS5pbnNlcnQoeCwgeSwgY2VsbEZhY3RvcnkuY3JlYXRlT3JnYW5pc20oXG4gICAgICAgICAgICAgICAgQ29sb3IucmFuZG9tKCksXG4gICAgICAgICAgICAgICAgR2Vub21lLmNyZWF0ZVJhbmRvbSgpXG4gICAgICAgICAgICApKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbWFrZVdhbGxzKGdhbWU6IEdhbWUsIHR5cGU6IFdBTExfVFlQRSk6IHZvaWQge1xuICAgIGNvbnN0IHNpemUgPSBnYW1lLmdldEdyaWQoKS5nZXRTaXplKCk7XG5cbiAgICBpZiAodHlwZSA9PT0gV0FMTF9UWVBFLkFST1VORCkge1xuICAgICAgICBmb3IgKGNvbnN0IHt4LCB5fSBvZiBnYW1lLmdldEdyaWQoKSkge1xuICAgICAgICAgICAgaWYgKHggPT09IDAgfHwgeSA9PT0gMCB8fCB4ID09PSBzaXplLmdldFdpZHRoKCkgLSAxIHx8IHkgPT09IHNpemUuZ2V0SGVpZ2h0KCkgLSAxKSB7XG4gICAgICAgICAgICAgICAgZ2FtZS5nZXRHcmlkKCkuaW5zZXJ0KHgsIHksIGdhbWUuZ2V0Q2VsbEZhY3RvcnkoKS5jcmVhdGVXYWxsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBDZWxsQ29udGV4dCBmcm9tIFwiLi9jZWxsLWNvbnRleHRcIjtcbmltcG9ydCBDZWxsRmFjdG9yeSBmcm9tIFwiLi9jZWxsLWZhY3RvcnlcIjtcbmltcG9ydCBHcmlkIGZyb20gXCIuL2dyaWRcIjtcbmltcG9ydCB7IFNpemUgfSBmcm9tIFwiLi9zaXplXCI7XG5cbmNsYXNzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZUV2ZW50cyB7XG4gICAgcHJlU3RlcDogdHlwZW9mIEV2ZW50ID0gRXZlbnQ7XG4gICAgcG9zdFN0ZXA6IHR5cGVvZiBFdmVudCA9IEV2ZW50O1xuICAgIHN0ZXA6IHR5cGVvZiBFdmVudCA9IEV2ZW50O1xuICAgIHN0YXJ0OiB0eXBlb2YgRXZlbnQgPSBFdmVudDtcbiAgICBwYXVzZTogdHlwZW9mIEV2ZW50ID0gRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICAgIHByaXZhdGUgc3RlcDogbnVtYmVyID0gMDtcblxuICAgIHByaXZhdGUgZ3JpZDogR3JpZDtcblxuICAgIHByaXZhdGUgdGltZW91dERlbGF5OiBudW1iZXIgPSA0MDtcblxuICAgIHByaXZhdGUgdGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PjtcblxuICAgIHByaXZhdGUgZXZlbnRTdWJzY3JpYmVyczogUmVjb3JkPGtleW9mIEdhbWVFdmVudHMsICgoZ2FtZTogR2FtZSkgPT4gYW55KVtdPjtcblxuICAgIGNvbnN0cnVjdG9yKHNpemU6IFNpemUsIHByaXZhdGUgY2VsbEZhY3Rvcnk6IENlbGxGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZ3JpZCA9IG5ldyBHcmlkKHNpemUsIGNlbGxGYWN0b3J5KTtcblxuICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlcnMgPSB7XG4gICAgICAgICAgICBwcmVTdGVwOiBbXSxcbiAgICAgICAgICAgIHBvc3RTdGVwOiBbXSxcbiAgICAgICAgICAgIHN0ZXA6IFtdLFxuICAgICAgICAgICAgc3RhcnQ6IFtdLFxuICAgICAgICAgICAgcGF1c2U6IFtdLFxuICAgICAgICB9OyBcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVBsYW50cygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY291bnRFbXB0eSA9IHRoaXMuZ3JpZC5jb3VudEVtcHR5KCk7XG5cbiAgICAgICAgaWYgKGNvdW50RW1wdHkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoYW5jZSA9IHRoaXMuZ3JpZC5jb3VudEVtcHR5KCkgLyB0aGlzLmdyaWQuZ2V0U2l6ZSgpLmdldENlbGxDb3VudCgpIC8gMTAwO1xuXG4gICAgICAgIGZvciAoY29uc3Qge3gsIHksIGNlbGx9IG9mIHRoaXMuZ3JpZCkge1xuICAgICAgICAgICAgaWYgKGNlbGwuaXNFbXB0eSgpICYmIE1hdGgucmFuZG9tKCkgPCBjaGFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWQuaW5zZXJ0KHgsIHksIHRoaXMuY2VsbEZhY3RvcnkuY3JlYXRlUGxhbnQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZXh0U3RlcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5maXJlRXZlbnQoJ3ByZVN0ZXAnKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQbGFudHMoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IHt4LCB5LCBjZWxsfSBvZiB0aGlzLmdyaWQpIHtcbiAgICAgICAgICAgIGlmICghIGNlbGwuaXNTdGF0aWMoKSkge1xuICAgICAgICAgICAgICAgIGNlbGwudXBkYXRlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgQ2VsbENvbnRleHQodGhpcy5ncmlkLCB4LCB5LCB0aGlzLmNlbGxGYWN0b3J5KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZpcmVFdmVudCgnc3RlcCcpO1xuXG4gICAgICAgIHRoaXMuc3RlcCsrO1xuXG4gICAgICAgIHRoaXMuZmlyZUV2ZW50KCdwb3N0U3RlcCcpO1xuICAgIH1cblxuICAgIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50aW1lb3V0SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGdhbWUgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiB0aWNrKCkge1xuICAgICAgICAgICAgZ2FtZS5uZXh0U3RlcCgpO1xuICAgICAgICAgICAgZ2FtZS50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRpY2ssIGdhbWUudGltZW91dERlbGF5KTtcbiAgICAgICAgfSwgdGhpcy50aW1lb3V0RGVsYXkpO1xuXG4gICAgICAgIHRoaXMuZmlyZUV2ZW50KCdzdGFydCcpO1xuICAgIH1cblxuICAgIHBhdXNlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50aW1lb3V0SWQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZpcmVFdmVudCgncGF1c2UnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEdyaWQoKTogR3JpZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyaWQ7XG4gICAgfVxuXG4gICAgZ2V0U3RlcCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwO1xuICAgIH1cblxuICAgIGdldENlbGxGYWN0b3J5KCk6IENlbGxGYWN0b3J5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2VsbEZhY3Rvcnk7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlPFQgZXh0ZW5kcyBrZXlvZiBHYW1lRXZlbnRzPih0eXBlOiBULCBjYWxsYmFjazogKGdhbWU6IEdhbWUpID0+IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlcnNbdHlwZV0ucHVzaChjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaXJlRXZlbnQodHlwZToga2V5b2YgR2FtZUV2ZW50cyk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaWJlcnNbdHlwZV0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayh0aGlzKSk7XG4gICAgfVxufSIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9jZWxsXCI7XG5pbXBvcnQgeyBFbXB0eUNlbGwgfSBmcm9tIFwiLi9lbXB0eS1jZWxsXCI7XG5pbXBvcnQgeyBNZWF0Q2VsbCB9IGZyb20gXCIuL21lYXQtY2VsbFwiO1xuaW1wb3J0IHsgT3JnYW5pc21BY3Rpb24gfSBmcm9tIFwiLi9vcmdhbmlzbS1hY3Rpb25cIjtcbmltcG9ydCB7IE9yZ2FuaXNtQ2VsbCB9IGZyb20gXCIuL29yZ2FuaXNtLWNlbGxcIjtcbmltcG9ydCB7IFBsYW50Q2VsbCB9IGZyb20gXCIuL3BsYW50LWNlbGxcIjtcbmltcG9ydCB7IFdhbGxDZWxsIH0gZnJvbSBcIi4vd2FsbFwiO1xuXG5jb25zdCBNVVRBVElPTl9QT1dFUiA9IDU7XG5cbmVudW0gVGFyZ2V0IHtcbiAgICBFTVBUWSA9IDAsXG4gICAgV0FMTCA9IDEsXG4gICAgUExBTlQgPSAyLFxuICAgIE1FQVQgPSAzLFxuICAgIE9SR0FOSVNNX1NJTUlMQVIgPSA0LFxuICAgIE9SR0FOSVNNX09USEVSID0gNVxufVxuXG5jb25zdCByYW5kb21BY3Rpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgZW51bVZhbHVlcyA9IE9iamVjdC5rZXlzKE9yZ2FuaXNtQWN0aW9uKVxuICAgICAgICAubWFwKG4gPT4gTnVtYmVyLnBhcnNlSW50KG4pKVxuICAgICAgICAuZmlsdGVyKG4gPT4gIU51bWJlci5pc05hTihuKSkgYXMgdW5rbm93biBhcyBPcmdhbmlzbUFjdGlvbltdO1xuICAgIHJldHVybiBlbnVtVmFsdWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVudW1WYWx1ZXMubGVuZ3RoKV07XG59XG5cbmNvbnN0IGdldFJhbmRvbUludCA9IChtYXg6IG51bWJlcikgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2Vub21lIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBtdXRhdGlvbtChaGFuY2U6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBzaW1pbGFyaXR5TGltaXQ6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSByZWZsZXhlczoge1trZXk6IGAke251bWJlcn1gXTogT3JnYW5pc21BY3Rpb259ID0ge31cbiAgICApIHtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgZ2V0QWN0aW9uKG9yZ2FuaXNtOiBPcmdhbmlzbUNlbGwsIHRhZ3JldENlbGw6IENlbGwpOiBPcmdhbmlzbUFjdGlvbiB7XG4gICAgICAgIGNvbnN0IGRpdmlzaW9uUG9zc2libGUgPSBvcmdhbmlzbS5nZXRFbmVyZ3koKSA+IDUwO1xuXG4gICAgICAgIGxldCB0YWdyZXRUeXBlO1xuXG4gICAgICAgIHRhZ3JldENlbGwudmlzaXQoe1xuICAgICAgICAgICAgdmlzaXRFbXB0eTogKGNlbGw6IEVtcHR5Q2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRhZ3JldFR5cGUgPSBUYXJnZXQuRU1QVFk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaXRXYWxsOiAoY2VsbDogV2FsbENlbGwpID0+IHtcbiAgICAgICAgICAgICAgICB0YWdyZXRUeXBlID0gVGFyZ2V0LldBTEw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaXRQbGFudDogKGNlbGw6IFBsYW50Q2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRhZ3JldFR5cGUgPSBUYXJnZXQuUExBTlQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaXRNZWF0OiAoY2VsbDogTWVhdENlbGwpID0+IHtcbiAgICAgICAgICAgICAgICB0YWdyZXRUeXBlID0gVGFyZ2V0Lk1FQVQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaXRPcmdhbmlzbTogKGNlbGw6IE9yZ2FuaXNtQ2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRhZ3JldFR5cGUgPSBvcmdhbmlzbS5pc1NpbWlsYXIoY2VsbCkgPyBUYXJnZXQuT1JHQU5JU01fU0lNSUxBUiA6IFRhcmdldC5PUkdBTklTTV9PVEhFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGRpdmlzaW9uUG9zc2libGUgJiYgdGFncmV0VHlwZSA9PT0gVGFyZ2V0LkVNUFRZKSB7XG4gICAgICAgICAgICByZXR1cm4gT3JnYW5pc21BY3Rpb24uRElWSURFO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5yZWZsZXhlc1tgJHt0YWdyZXRUeXBlIGFzIG51bWJlcn1gXTtcblxuICAgICAgICBpZiAoYWN0aW9uID09PSB1bmRlZmluZWQgfHwgYWN0aW9uID09PSBPcmdhbmlzbUFjdGlvbi5ESVZJREUgJiYgISBkaXZpc2lvblBvc3NpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gT3JnYW5pc21BY3Rpb24uTk9USElORztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY3Rpb247XG4gICAgfVxuXG4gICAgY29tcGFyZShnZW5vbWU6IEdlbm9tZSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlzU2ltaWxhcihnZW5vbWU6IEdlbm9tZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKGdlbm9tZSkgPj0gdGhpcy5zaW1pbGFyaXR5TGltaXQ7XG4gICAgfVxuXG4gICAgY2xvbmUoKTogR2Vub21lIHtcbiAgICAgICAgbGV0IHNpbWlsYXJpdHlMaW1pdCA9IHRoaXMuc2ltaWxhcml0eUxpbWl0O1xuICAgICAgICBsZXQgbXV0YXRpb27QoWhhbmNlID0gdGhpcy5tdXRhdGlvbtChaGFuY2U7XG4gICAgICAgIGxldCByZWZsZXhlczoge1trZXk6IGAke251bWJlcn1gXTogT3JnYW5pc21BY3Rpb259ID0ge307XG5cbiAgICAgICAgZm9yIChsZXQga2V5IG9mIEdlbm9tZS5nZW5lcmF0ZVJlZmxleEtleXMoKSkge1xuICAgICAgICAgICAgcmVmbGV4ZXNba2V5XSA9IHRoaXMucmVmbGV4ZXNba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9u0KFoYW5jZSA+IGdldFJhbmRvbUludCgxMDApKSB7XG4gICAgICAgICAgICBjb25zdCBtdXRhdGVQYXJhbSA9IGdldFJhbmRvbUludCg4KTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAobXV0YXRlUGFyYW0gPT09IDApIHtcbiAgICAgICAgICAgICAgICBtdXRhdGlvbtChaGFuY2UgKz0gTVVUQVRJT05fUE9XRVIgKiAoZ2V0UmFuZG9tSW50KDIpID09PSAxID8gLTEgOiAxKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChtdXRhdGVQYXJhbSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHNpbWlsYXJpdHlMaW1pdCArPSBNVVRBVElPTl9QT1dFUiAqIChnZXRSYW5kb21JbnQoMikgPT09IDEgPyAtMSA6IDEpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG11dGF0ZVBhcmFtID49IDIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gR2Vub21lLmdlbmVyYXRlUmVmbGV4S2V5cygpO1xuICAgICAgICAgICAgICAgIHJlZmxleGVzW2tleXNbZ2V0UmFuZG9tSW50KGtleXMubGVuZ3RoKV1dID0gcmFuZG9tQWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IEdlbm9tZShcbiAgICAgICAgICAgIG11dGF0aW9u0KFoYW5jZSxcbiAgICAgICAgICAgIHNpbWlsYXJpdHlMaW1pdCxcbiAgICAgICAgICAgIHJlZmxleGVzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdlbmVyYXRlUmVmbGV4S2V5cygpOiBgJHtudW1iZXJ9YFtdIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gT2JqZWN0LnZhbHVlcyhUYXJnZXQpLmZpbHRlcih2ID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJykgYXMgbnVtYmVyW107XG5cbiAgICAgICAgY29uc3QgcmVzdWx0OiBgJHtudW1iZXJ9YFtdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgdGFyZ2V0VmFsdWUgb2YgdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHt0YXJnZXRWYWx1ZX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZVJhbmRvbSgpOiBHZW5vbWUge1xuICAgICAgICBsZXQgcmVmbGV4ZXM6IHtba2V5OiBgJHtudW1iZXJ9YF06IE9yZ2FuaXNtQWN0aW9ufSA9IHt9O1xuXG4gICAgICAgIGZvciAobGV0IGtleSBvZiBHZW5vbWUuZ2VuZXJhdGVSZWZsZXhLZXlzKCkpIHtcbiAgICAgICAgICAgIHJlZmxleGVzW2tleV0gPSByYW5kb21BY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgR2Vub21lKFxuICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSxcbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCksXG4gICAgICAgICAgICByZWZsZXhlc1xuICAgICAgICApO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4vY2VsbFwiO1xuaW1wb3J0IHsgU2l6ZSB9IGZyb20gXCIuL3NpemVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JpZEl0ZXJhdG9yIHtcbiAgICBwcml2YXRlIHg6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSB5OiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY2VsbHM6IENlbGxbXVtdLFxuICAgICAgICBwcml2YXRlIHNpemU6IFNpemVcbiAgICApIHtcblxuICAgIH1cblxuICAgIHB1YmxpYyBuZXh0KCk6IHtjZWxsOiBDZWxsLCB4OiBudW1iZXIsIHk6IG51bWJlcn0ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBjZWxsOiB0aGlzLmNlbGxzW3RoaXMueF1bdGhpcy55XSxcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMueCsrO1xuXG4gICAgICAgIGlmICh0aGlzLnggPT09IHRoaXMuc2l6ZS5nZXRXaWR0aCgpKSB7XG4gICAgICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICAgICAgdGhpcy55Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHB1YmxpYyBoYXNOZXh0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy55IDwgdGhpcy5zaXplLmdldEhlaWdodCgpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBhc3NlcnRHcmVhdGVyT3JFcXVhbFRoYW4sIGFzc2VydExlc3NUaGFuIH0gZnJvbSBcIi4uL2NvbW1vbi9hc3NlcnRzXCI7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4vY2VsbFwiO1xuaW1wb3J0IENlbGxGYWN0b3J5IGZyb20gXCIuL2NlbGwtZmFjdG9yeVwiO1xuaW1wb3J0IEdyaWRJdGVyYXRvciBmcm9tIFwiLi9ncmlkLWl0ZXJhdG9yXCI7XG5pbXBvcnQgeyBTaXplIH0gZnJvbSBcIi4vc2l6ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmlkIHtcbiAgICBwcml2YXRlIGNlbGxzOiB7W2tleTogYCR7bnVtYmVyfToke251bWJlcn1gXTogQ2VsbH0gPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHNpemU6IFNpemUsXG4gICAgICAgIHByaXZhdGUgY2VsbEZhY3Rvcnk6IENlbGxGYWN0b3J5XG4gICAgKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgY29uc3QgaXRlcmF0b3IgPSBuZXcgR3JpZEl0ZXJhdG9yKHRoaXMuY3JlYXRlU25hcHNob3QoKSwgdGhpcy5zaXplKTtcblxuICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICAgICAgICB5aWVsZCBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldFNpemUoKTogU2l6ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemU7XG4gICAgfVxuXG4gICAgcHVibGljIGluc2VydCh4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogQ2VsbCk6IHZvaWQge1xuICAgICAgICBhc3NlcnRMZXNzVGhhbih4LCB0aGlzLnNpemUuZ2V0V2lkdGgoKSk7XG4gICAgICAgIGFzc2VydExlc3NUaGFuKHksIHRoaXMuc2l6ZS5nZXRIZWlnaHQoKSk7XG4gICAgICAgIGFzc2VydEdyZWF0ZXJPckVxdWFsVGhhbih4LCAwKTtcbiAgICAgICAgYXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuKHksIDApO1xuXG4gICAgICAgIHRoaXMuY2VsbHNbYCR7eH06JHt5fWBdID0gY2VsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVsZXRlKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNlbGxzW2Ake3h9OiR7eX1gXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlcik6IENlbGwge1xuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5jZWxsc1tgJHt4fToke3l9YF07XG5cbiAgICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgICAgIHJldHVybiBjZWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2VsbEZhY3RvcnkuY3JlYXRlRW1wdHkoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY291bnRFbXB0eSgpOiBudW1iZXIge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5zaXplLmdldENlbGxDb3VudCgpO1xuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuY2VsbHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNlbGxzW2tleSBhcyBgJHtudW1iZXJ9OiR7bnVtYmVyfWBdLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVNuYXBzaG90KCk6IENlbGxbXVtdIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnNpemUuZ2V0V2lkdGgoKTsgeCsrKSB7XG4gICAgICAgICAgICBpZiAoISByZXN1bHRbeF0pIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbeF0gPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLnNpemUuZ2V0SGVpZ2h0KCk7IHkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFt4XVt5XSA9IHRoaXMuZ2V0Q2VsbCh4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufSIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9jZWxsXCI7XG5pbXBvcnQgQ2VsbFZpc2l0b3IgZnJvbSBcIi4vY2VsbC12aXNpdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBNZWF0Q2VsbCBleHRlbmRzIENlbGwge1xuICAgIHZpc2l0KHZpc2l0b3I6IENlbGxWaXNpdG9yKTogdm9pZCB7XG4gICAgICAgIHZpc2l0b3IudmlzaXRNZWF0KHRoaXMpO1xuICAgIH1cbn0iLCJleHBvcnQgZW51bSBPcmdhbmlzbUFjdGlvbiB7XG4gICAgUk9UQVRFX0xFRlQsXG4gICAgUk9UQVRFX1JJR0hULFxuICAgIFNURVAsXG4gICAgQVRUQUNLLFxuICAgIEVBVCxcbiAgICBESVZJREUsXG4gICAgTk9USElOR1xufSIsImltcG9ydCBDb2xvciBmcm9tIFwiLi4vY29tbW9uL2NvbG9yXCI7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4vY2VsbFwiO1xuaW1wb3J0IENlbGxDb250ZXh0IGZyb20gXCIuL2NlbGwtY29udGV4dFwiO1xuaW1wb3J0IENlbGxGYWN0b3J5IGZyb20gXCIuL2NlbGwtZmFjdG9yeVwiO1xuaW1wb3J0IENlbGxWaXNpdG9yIGZyb20gXCIuL2NlbGwtdmlzaXRvclwiO1xuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcIi4vZGlyZWN0aW9uXCI7XG5pbXBvcnQgR2Vub21lIGZyb20gXCIuL2dlbm9tZVwiO1xuaW1wb3J0IHsgTWVhdENlbGwgfSBmcm9tIFwiLi9tZWF0LWNlbGxcIjtcbmltcG9ydCB7IE9yZ2FuaXNtQWN0aW9uIH0gZnJvbSBcIi4vb3JnYW5pc20tYWN0aW9uXCI7XG5pbXBvcnQgeyBQbGFudENlbGwgfSBmcm9tIFwiLi9wbGFudC1jZWxsXCI7XG5cbmNvbnN0IE1BWF9MSUZFVElNRSA9IDEwMDtcbmNvbnN0IElOSVRJQUxfRU5FUkdZID0gNzA7XG5jb25zdCBFTkVSR1lfTUVBVCA9IDIwO1xuY29uc3QgRU5FUkdZX1BMQU5UID0gMjA7XG5cbmV4cG9ydCBjbGFzcyBPcmdhbmlzbUNlbGwgZXh0ZW5kcyBDZWxsIHtcbiAgICBwcml2YXRlIGxpZmV0aW1lOiBudW1iZXIgPSAwO1xuXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IERpcmVjdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbG9yOiBDb2xvcixcbiAgICAgICAgcHJpdmF0ZSBnZW5vbWU6IEdlbm9tZSxcbiAgICAgICAgcHJpdmF0ZSBlbmVyZ3k6IG51bWJlciA9IElOSVRJQUxfRU5FUkdZXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLnJhbmRvbSgpO1xuICAgIH1cblxuICAgIGdldExpZmV0aW1lKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZmV0aW1lO1xuICAgIH1cblxuICAgIGdldEVuZXJneSgpOiBEaXJlY3Rpb24ge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmVyZ3k7XG4gICAgfVxuXG4gICAgZ2V0RGlyZWN0aW9uKCk6IERpcmVjdGlvbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBnZXRHZW5vbWUoKTogR2Vub21lIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2Vub21lO1xuICAgIH1cblxuICAgIHZpc2l0KHZpc2l0b3I6IENlbGxWaXNpdG9yKTogdm9pZCB7XG4gICAgICAgIHZpc2l0b3IudmlzaXRPcmdhbmlzbSh0aGlzKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoY29udGV4dDogQ2VsbENvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubGlmZXRpbWUgPiBNQVhfTElGRVRJTUUgfHwgdGhpcy5lbmVyZ3kgPD0gMCkge1xuICAgICAgICAgICAgY29udGV4dC5yZXBsYWNlKChmYWN0b3J5OiBDZWxsRmFjdG9yeSkgPT4gZmFjdG9yeS5jcmVhdGVNZWF0KCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2Zmc2V0QnlEaXJlY3Rpb24gPSBEaXJlY3Rpb24uZ2V0T2Zmc2V0KHRoaXMuZGlyZWN0aW9uKTtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNvbnRleHQuZ2V0QnlPZmZlc3QoLi4ub2Zmc2V0QnlEaXJlY3Rpb24pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZW5vbWUuZ2V0QWN0aW9uKHRoaXMsIGNlbGwpO1xuXG4gICAgICAgIGlmIChhY3Rpb24gPT09IE9yZ2FuaXNtQWN0aW9uLlNURVApIHtcbiAgICAgICAgICAgIGNvbnRleHQubW92ZUJ5T2ZmZXN0KC4uLm9mZnNldEJ5RGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRW5lcmd5KC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IE9yZ2FuaXNtQWN0aW9uLlJPVEFURV9MRUZUKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5yb3RhdGVMZWZ0KHRoaXMuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRW5lcmd5KC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IE9yZ2FuaXNtQWN0aW9uLlJPVEFURV9SSUdIVCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24ucm90YXRlTGVmdCh0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUVuZXJneSgtMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBPcmdhbmlzbUFjdGlvbi5ESVZJREUpIHtcbiAgICAgICAgICAgIGlmIChjZWxsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZUJ5T2ZmZXN0KC4uLm9mZnNldEJ5RGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUVuZXJneShNYXRoLmZsb29yKHRoaXMuZW5lcmd5IC8gLTIpKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnJlcGxhY2UoKGZhY3Rvcnk6IENlbGxGYWN0b3J5KSA9PiBmYWN0b3J5LmNyZWF0ZU9yZ2FuaXNtKHRoaXMuY29sb3IsIHRoaXMuZ2Vub21lLmNsb25lKCksIHRoaXMuZW5lcmd5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBPcmdhbmlzbUFjdGlvbi5BVFRBQ0spIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBjZWxsLnZpc2l0KG5ldyBjbGFzcyBleHRlbmRzIENlbGxWaXNpdG9yIHtcbiAgICAgICAgICAgICAgICB2aXNpdE9yZ2FuaXNtKGNlbGw6IE9yZ2FuaXNtQ2VsbCk6IHZvaWQge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmtpbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VFbmVyZ3koLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gT3JnYW5pc21BY3Rpb24uRUFUKSB7XG4gICAgICAgICAgICBjb25zdCBlYXQgPSAoZW5lcmd5OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRlbGV0ZUJ5T2Zmc2V0KC4uLm9mZnNldEJ5RGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVCeU9mZmVzdCguLi5vZmZzZXRCeURpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VFbmVyZ3koZW5lcmd5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2VsbC52aXNpdChuZXcgY2xhc3MgZXh0ZW5kcyBDZWxsVmlzaXRvciB7XG4gICAgICAgICAgICAgICAgdmlzaXRNZWF0KGNlbGw6IE1lYXRDZWxsKTogdm9pZCB7XG4gICAgICAgICAgICAgICAgICAgIGVhdChFTkVSR1lfTUVBVCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmlzaXRQbGFudChjZWxsOiBQbGFudENlbGwpOiB2b2lkIHtcbiAgICAgICAgICAgICAgICAgICAgZWF0KEVORVJHWV9QTEFOVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxpZmV0aW1lKys7XG4gICAgfVxuXG4gICAgY2hhbmdlRW5lcmd5KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmVyZ3kgKz0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMuZW5lcmd5ID4gMTAwKSB7XG4gICAgICAgICAgICB0aGlzLmVuZXJneSA9IDEwMDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVuZXJneSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZW5lcmd5ID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGtpbGwoKSB7XG4gICAgICAgIHRoaXMuZW5lcmd5ID0gMDtcbiAgICB9XG5cbiAgICBpc1N0YXRpYygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlzU2ltaWxhcihjZWxsOiBPcmdhbmlzbUNlbGwpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2Vub21lLmlzU2ltaWxhcihjZWxsLmdldEdlbm9tZSgpKTtcbiAgICB9XG5cbiAgICBnZXRDb2xvcigpOiBDb2xvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4vY2VsbFwiO1xuaW1wb3J0IENlbGxWaXNpdG9yIGZyb20gXCIuL2NlbGwtdmlzaXRvclwiO1xuXG5leHBvcnQgY2xhc3MgUGxhbnRDZWxsIGV4dGVuZHMgQ2VsbCB7XG4gICAgdmlzaXQodmlzaXRvcjogQ2VsbFZpc2l0b3IpOiB2b2lkIHtcbiAgICAgICAgdmlzaXRvci52aXNpdFBsYW50KHRoaXMpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBhc3NlcnRHcmVhdGVyT3JFcXVhbFRoYW4gfSBmcm9tIFwiLi4vY29tbW9uL2Fzc2VydHNcIjtcblxuZXhwb3J0IGNsYXNzIFNpemUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHdpZHRoOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgaGVpZ2h0OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgYXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuKHdpZHRoLCAwKTtcbiAgICAgICAgYXNzZXJ0R3JlYXRlck9yRXF1YWxUaGFuKGhlaWdodCwgMCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRXaWR0aCh3aWR0aDogbnVtYmVyKTogU2l6ZSB7XG4gICAgICAgIHJldHVybiBuZXcgU2l6ZSh3aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRIZWlnaHQoaGVpZ2h0OiBudW1iZXIpOiBTaXplIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaXplKHRoaXMud2lkdGgsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhdGlvKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENlbGxDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0O1xuICAgIH1cbn0iLCJpbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4vY2VsbFwiO1xuaW1wb3J0IGNlbGxWaXNpdG9yIGZyb20gXCIuL2NlbGwtdmlzaXRvclwiO1xuXG5leHBvcnQgY2xhc3MgV2FsbENlbGwgZXh0ZW5kcyBDZWxsIHtcbiAgICB2aXNpdCh2aXNpdG9yOiBjZWxsVmlzaXRvcik6IHZvaWQge1xuICAgICAgICB2aXNpdG9yLnZpc2l0V2FsbCh0aGlzKTtcbiAgICB9XG59IiwiaW1wb3J0IEdhbWUgZnJvbSBcIi4uL2dhbWUvZ2FtZVwiO1xuaW1wb3J0IFN0YXRlZ3lJbnRlcmZhY2UgZnJvbSBcIi4vc3RyYXRlZ3ktaW50ZXJmYWNlXCI7XG5pbXBvcnQgRGVmYXVsdFN0cmF0ZWd5IGZyb20gXCIuL3N0cmF0ZWd5L2RlZmF1bHQtc3RyYXRlZ3lcIjtcbmltcG9ydCBFbmVyZ3lTdHJhdGVneSBmcm9tIFwiLi9zdHJhdGVneS9lbmVyZ3ktc3RyYXRlZ3lcIjtcbmltcG9ydCBHZW5lc2lzU3RyYXRlZ3kgZnJvbSBcIi4vc3RyYXRlZ3kvZ2VuZXNpcy1zdHJhdGVneVwiO1xuXG5leHBvcnQgdHlwZSBSZW5kZXJTdHJhdGVneSA9ICdub25lJyB8ICdkZWZhdWx0JyB8ICdlbmVyZ3knIHwgJ2dlbmVzaXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICBwcml2YXRlIHJlbmRlclN0cmF0ZWd5OiBTdGF0ZWd5SW50ZXJmYWNlO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcbiAgICAgICAgcHJpdmF0ZSBnYW1lOiBHYW1lLFxuICAgICAgICByZW5kZXJTdHJhdGVneTogUmVuZGVyU3RyYXRlZ3lcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHRoaXMuc2V0UmVuZGVyU3RyYXRlZ3kocmVuZGVyU3RyYXRlZ3kpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIGlmICghIHRoaXMucmVuZGVyU3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IHdpZHRoLCBoZWlnaHQ7XG5cbiAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2FtZS5nZXRHcmlkKCkuZ2V0U2l6ZSgpO1xuICAgICAgICBjb25zdCBnYW1lUmF0aW8gPSBzaXplLmdldFJhdGlvKCk7XG4gICAgICAgIGNvbnN0IGNhbnZhc1JhdGlvID0gdGhpcy5jYW52YXMud2lkdGggLyB0aGlzLmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgIFxuICAgICAgICBsZXQgc3RhcnRQb3NpdGlvbiA9IFswLCAwXTtcblxuICAgICAgICBpZiAoZ2FtZVJhdGlvID4gY2FudmFzUmF0aW8pIHtcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmNhbnZhcy53aWR0aCAvIGdhbWVSYXRpbztcbiAgICAgICAgICAgIHN0YXJ0UG9zaXRpb25bMV0gPSAodGhpcy5jYW52YXMuaGVpZ2h0IC0gaGVpZ2h0KSAvIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aWR0aCA9IHRoaXMuY2FudmFzLmhlaWdodCAqIGdhbWVSYXRpbztcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcbiAgICAgICAgICAgIHN0YXJ0UG9zaXRpb25bMF0gPSAodGhpcy5jYW52YXMud2lkdGggLSB3aWR0aCkgLyAyO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2VsbFNpemUgPSB3aWR0aCAvIHRoaXMuZ2FtZS5nZXRHcmlkKCkuZ2V0U2l6ZSgpLmdldFdpZHRoKCk7XG5cbiAgICAgICAgZm9yIChjb25zdCB7eCwgeSwgY2VsbH0gb2YgdGhpcy5nYW1lLmdldEdyaWQoKSkge1xuICAgICAgICAgICAgY29uc3QgY3Vyc29yWCA9IHN0YXJ0UG9zaXRpb25bMF0gKyB4ICogY2VsbFNpemU7XG4gICAgICAgICAgICBjb25zdCBjdXJzb3JZID0gc3RhcnRQb3NpdGlvblsxXSArIHkgKiBjZWxsU2l6ZTtcblxuICAgICAgICAgICAgY2VsbC52aXNpdCh0aGlzLnJlbmRlclN0cmF0ZWd5LmNyZWF0ZVZpc2l0b3IoY3Vyc29yWCwgY3Vyc29yWSwgY2VsbFNpemUpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFJlbmRlclN0cmF0ZWd5KHN0cmF0ZWd5OiBSZW5kZXJTdHJhdGVneSk6IHZvaWQge1xuICAgICAgICBpZiAoc3RyYXRlZ3kgPT09ICdub25lJykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdHJhdGVneSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RyYXRlZ3kgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdHJhdGVneSA9IG5ldyBEZWZhdWx0U3RyYXRlZ3kodGhpcy5jb250ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChzdHJhdGVneSA9PT0gJ2VuZXJneScpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU3RyYXRlZ3kgPSBuZXcgRW5lcmd5U3RyYXRlZ3kodGhpcy5jb250ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChzdHJhdGVneSA9PT0gJ2dlbmVzaXMnKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclN0cmF0ZWd5ID0gbmV3IEdlbmVzaXNTdHJhdGVneSh0aGlzLmNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBDZWxsVmlzaXRvciBmcm9tIFwiLi4vLi4vZ2FtZS9jZWxsLXZpc2l0b3JcIjtcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gXCIuLi8uLi9nYW1lL2RpcmVjdGlvblwiO1xuaW1wb3J0IHsgRW1wdHlDZWxsIH0gZnJvbSBcIi4uLy4uL2dhbWUvZW1wdHktY2VsbFwiO1xuaW1wb3J0IHsgTWVhdENlbGwgfSBmcm9tIFwiLi4vLi4vZ2FtZS9tZWF0LWNlbGxcIjtcbmltcG9ydCB7IE9yZ2FuaXNtQ2VsbCB9IGZyb20gXCIuLi8uLi9nYW1lL29yZ2FuaXNtLWNlbGxcIjtcbmltcG9ydCB7IFBsYW50Q2VsbCB9IGZyb20gXCIuLi8uLi9nYW1lL3BsYW50LWNlbGxcIjtcbmltcG9ydCB7IFdhbGxDZWxsIH0gZnJvbSBcIi4uLy4uL2dhbWUvd2FsbFwiO1xuaW1wb3J0IFN0YXRlZ3lJbnRlcmZhY2UgZnJvbSBcIi4uL3N0cmF0ZWd5LWludGVyZmFjZVwiO1xuXG50eXBlIFN0eWxlcyA9IHtcbiAgICBDRUxMX1dBTExfQ09MT1I/OiBzdHJpbmcsXG4gICAgQ0VMTF9PUkdBTklTTV9DT0xPUj86IHN0cmluZyxcbiAgICBDRUxMX09SR0FOSVNNX0VZRV9DT0xPUj86IHN0cmluZyxcbiAgICBDRUxMX0VNUFRZX0NPTE9SPzogc3RyaW5nLFxuICAgIENFTExfUExBTlRfQ09MT1I/OiBzdHJpbmcsXG4gICAgQ0VMTF9NRUFUX0NPTE9SPzogc3RyaW5nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWZhdWx0U3RyYXRlZ3kgaW1wbGVtZW50cyBTdGF0ZWd5SW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJvdGVjdGVkIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgcHJvdGVjdGVkIHN0eWxlcz86IFN0eWxlc1xuICAgICkge1xuICAgICAgICB0aGlzLnN0eWxlcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgQ0VMTF9XQUxMX0NPTE9SOiAnIzVmNWY1ZicsXG4gICAgICAgICAgICBDRUxMX09SR0FOSVNNX0NPTE9SOiAnIzBCNUZBNScsXG4gICAgICAgICAgICBDRUxMX09SR0FOSVNNX0VZRV9DT0xPUjogJyM2NkExRDInLFxuICAgICAgICAgICAgQ0VMTF9FTVBUWV9DT0xPUjogJyMwMDAwMDAnLFxuICAgICAgICAgICAgQ0VMTF9QTEFOVF9DT0xPUjogJyMzOTkyMDAnLFxuICAgICAgICAgICAgQ0VMTF9NRUFUX0NPTE9SOiAnI0ZFNzI3NicsXG4gICAgICAgIH0sIHN0eWxlcyk7XG4gICAgfVxuXG4gICAgY3JlYXRlVmlzaXRvcih4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbFNpemU6IG51bWJlcik6IENlbGxWaXNpdG9yIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZpc2l0RW1wdHk6IChjZWxsOiBFbXB0eUNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5zdHlsZXMuQ0VMTF9FTVBUWV9DT0xPUjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoeCwgeSwgY2VsbFNpemUsIGNlbGxTaXplKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2aXNpdFdhbGw6IChjZWxsOiBXYWxsQ2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlcy5DRUxMX1dBTExfQ09MT1I7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHgsIHksIGNlbGxTaXplLCBjZWxsU2l6ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaXRQbGFudDogKGNlbGw6IFBsYW50Q2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlcy5DRUxMX1BMQU5UX0NPTE9SO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdCh4LCB5LCBjZWxsU2l6ZSwgY2VsbFNpemUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpc2l0TWVhdDogKGNlbGw6IE1lYXRDZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuc3R5bGVzLkNFTExfTUVBVF9DT0xPUjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoeCwgeSwgY2VsbFNpemUsIGNlbGxTaXplKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2aXNpdE9yZ2FuaXNtOiAoY2VsbDogT3JnYW5pc21DZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuc3R5bGVzLkNFTExfT1JHQU5JU01fQ09MT1I7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHgsIHksIGNlbGxTaXplLCBjZWxsU2l6ZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBleWVTaXplID0gY2VsbFNpemUgLyAzO1xuXG4gICAgICAgICAgICAgICAgbGV0IGV5ZU9mZnNldDtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAoY2VsbC5nZXREaXJlY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5OT1JUSF9XRVNUOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXllT2Zmc2V0ID0gWzAsIDBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLk5PUlRIOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXllT2Zmc2V0ID0gW2V5ZVNpemUsIDBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLk5PUlRIX0VBU1Q6XG4gICAgICAgICAgICAgICAgICAgICAgICBleWVPZmZzZXQgPSBbZXllU2l6ZSAqIDIsIDBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlNPVVRIX1dFU1Q6XG4gICAgICAgICAgICAgICAgICAgICAgICBleWVPZmZzZXQgPSBbMCwgZXllU2l6ZSAqIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlNPVVRIOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXllT2Zmc2V0ID0gW2V5ZVNpemUsIGV5ZVNpemUgKiAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5TT1VUSF9FQVNUOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXllT2Zmc2V0ID0gW2V5ZVNpemUgKiAyLCBleWVTaXplICogMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uV0VTVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGV5ZU9mZnNldCA9IFswLCBleWVTaXplXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5FQVNUOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXllT2Zmc2V0ID0gW2V5ZVNpemUgKiAyLCBleWVTaXplXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlcy5DRUxMX09SR0FOSVNNX0VZRV9DT0xPUjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoeCArIGV5ZU9mZnNldFswXSwgeSArIGV5ZU9mZnNldFsxXSwgZXllU2l6ZSwgZXllU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSIsImltcG9ydCBDb2xvciBmcm9tIFwiLi4vLi4vY29tbW9uL2NvbG9yXCI7XG5pbXBvcnQgQ2VsbFZpc2l0b3IgZnJvbSBcIi4uLy4uL2dhbWUvY2VsbC12aXNpdG9yXCI7XG5pbXBvcnQgeyBFbXB0eUNlbGwgfSBmcm9tIFwiLi4vLi4vZ2FtZS9lbXB0eS1jZWxsXCI7XG5pbXBvcnQgeyBNZWF0Q2VsbCB9IGZyb20gXCIuLi8uLi9nYW1lL21lYXQtY2VsbFwiO1xuaW1wb3J0IHsgT3JnYW5pc21DZWxsIH0gZnJvbSBcIi4uLy4uL2dhbWUvb3JnYW5pc20tY2VsbFwiO1xuaW1wb3J0IHsgUGxhbnRDZWxsIH0gZnJvbSBcIi4uLy4uL2dhbWUvcGxhbnQtY2VsbFwiO1xuaW1wb3J0IHsgV2FsbENlbGwgfSBmcm9tIFwiLi4vLi4vZ2FtZS93YWxsXCI7XG5pbXBvcnQgRGVmYXVsdFN0cmF0ZWd5IGZyb20gXCIuL2RlZmF1bHQtc3RyYXRlZ3lcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5lcmd5U3RyYXRlZ3kgZXh0ZW5kcyBEZWZhdWx0U3RyYXRlZ3kge1xuICAgIGNyZWF0ZVZpc2l0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGxTaXplOiBudW1iZXIpOiBDZWxsVmlzaXRvciB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2aXNpdEVtcHR5OiAoY2VsbDogRW1wdHlDZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuc3R5bGVzLkNFTExfRU1QVFlfQ09MT1I7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHgsIHksIGNlbGxTaXplLCBjZWxsU2l6ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlzaXRXYWxsOiAoY2VsbDogV2FsbENlbGwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5zdHlsZXMuQ0VMTF9XQUxMX0NPTE9SO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdCh4LCB5LCBjZWxsU2l6ZSwgY2VsbFNpemUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpc2l0UGxhbnQ6IChjZWxsOiBQbGFudENlbGwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5zdHlsZXMuQ0VMTF9FTVBUWV9DT0xPUjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoeCwgeSwgY2VsbFNpemUsIGNlbGxTaXplKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2aXNpdE1lYXQ6IChjZWxsOiBNZWF0Q2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlcy5DRUxMX0VNUFRZX0NPTE9SO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdCh4LCB5LCBjZWxsU2l6ZSwgY2VsbFNpemUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpc2l0T3JnYW5pc206IChjZWxsOiBPcmdhbmlzbUNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZW5lcmd5ID0gY2VsbC5nZXRFbmVyZ3koKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBDb2xvci5mcm9tSGV4KCcjZmZmZjAwJykubWl4KFxuICAgICAgICAgICAgICAgICAgICBDb2xvci5mcm9tSGV4KCcjZmYwMDAwJyksXG4gICAgICAgICAgICAgICAgICAgIGVuZXJneSAvIDEwMFxuICAgICAgICAgICAgICAgICkudG9IZXhGb3JtYXQoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdCh4LCB5LCBjZWxsU2l6ZSwgY2VsbFNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn0iLCJpbXBvcnQgQ2VsbFZpc2l0b3IgZnJvbSBcIi4uLy4uL2dhbWUvY2VsbC12aXNpdG9yXCI7XG5pbXBvcnQgeyBPcmdhbmlzbUNlbGwgfSBmcm9tIFwiLi4vLi4vZ2FtZS9vcmdhbmlzbS1jZWxsXCI7XG5pbXBvcnQgRGVmYXVsdFN0cmF0ZWd5IGZyb20gXCIuL2RlZmF1bHQtc3RyYXRlZ3lcIjtcblxudHlwZSBTdHlsZXMgPSB7XG4gICAgQ0VMTF9XQUxMX0NPTE9SPzogc3RyaW5nLFxuICAgIENFTExfT1JHQU5JU01fQ09MT1I/OiBzdHJpbmcsXG4gICAgQ0VMTF9PUkdBTklTTV9FWUVfQ09MT1I/OiBzdHJpbmcsXG4gICAgQ0VMTF9FTVBUWV9DT0xPUj86IHN0cmluZyxcbiAgICBDRUxMX1BMQU5UX0NPTE9SPzogc3RyaW5nLFxuICAgIENFTExfTUVBVF9DT0xPUj86IHN0cmluZyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2VuZXNpc1N0cmF0ZWd5IGV4dGVuZHMgRGVmYXVsdFN0cmF0ZWd5IHtcbiAgICBjcmVhdGVWaXNpdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsU2l6ZTogbnVtYmVyKTogQ2VsbFZpc2l0b3Ige1xuICAgICAgICBjb25zdCB2aXNpdG9yID0gc3VwZXIuY3JlYXRlVmlzaXRvcih4LCB5LCBjZWxsU2l6ZSk7XG5cbiAgICAgICAgdmlzaXRvci52aXNpdE9yZ2FuaXNtID0gKGNlbGw6IE9yZ2FuaXNtQ2VsbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGNlbGwuZ2V0Q29sb3IoKS50b0hleEZvcm1hdCgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHgsIHksIGNlbGxTaXplLCBjZWxsU2l6ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmlzaXRvcjtcbiAgICB9XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCBDb2xvciBmcm9tIFwiLi9jb21tb24vY29sb3JcIjtcclxuaW1wb3J0IEdhbWUgZnJvbSBcIi4vZ2FtZS9nYW1lXCI7XHJcbmltcG9ydCBjcmVhdGVHYW1lLCB7IFdBTExfVFlQRSB9IGZyb20gXCIuL2dhbWUvZ2FtZS1mYWN0b3J5XCI7XHJcbmltcG9ydCBDYW52YXNSZW5kZXJlciwgeyBSZW5kZXJTdHJhdGVneSB9IGZyb20gXCIuL3JlbmRlci9jYW52YXMtcmVuZGVyZXJcIjtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBjYW52YXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhcy1jb250YWluZXJcIik7XHJcblxyXG5mdW5jdGlvbiBmaXRDYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGNvbnRhaW5lci5jbGllbnRXaWR0aC50b1N0cmluZygpKTtcclxuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgY29udGFpbmVyLmNsaWVudEhlaWdodC50b1N0cmluZygpKTtcclxufVxyXG5cclxuZml0Q2FudmFzKGNhbnZhcywgY2FudmFzQ29udGFpbmVyKTtcclxuXHJcbmNvbnN0IGdhbWUgPSBjcmVhdGVHYW1lKHtcclxuICAgIHdhbGxzOiBXQUxMX1RZUEUuQVJPVU5ELFxyXG59KTtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IENhbnZhc1JlbmRlcmVyKGNhbnZhcywgZ2FtZSwgJ2RlZmF1bHQnKTtcclxucmVuZGVyZXIucmVuZGVyKCk7XHJcblxyXG5nYW1lLnN1YnNjcmliZSgnc3RlcCcsIChnYW1lOiBHYW1lKSA9PiB7XHJcbiAgICByZW5kZXJlci5yZW5kZXIoKTtcclxufSk7XHJcblxyXG5nYW1lLnN0YXJ0KCk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgZml0Q2FudmFzKGNhbnZhcywgY2FudmFzQ29udGFpbmVyKTtcclxuICAgIHJlbmRlcmVyLnJlbmRlcigpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBfdGhlbWUnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgcmVuZGVyZXIuc2V0UmVuZGVyU3RyYXRlZ3koKChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUpIGFzIFJlbmRlclN0cmF0ZWd5KTtcclxufSk7Il0sIm5hbWVzIjpbInZhbHVlIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiQXNzZXJ0SW50ZWdlckVycm9yIiwiY29tcGFyZWRWYWx1ZSIsIkFzc2VydEdyZWF0ZXJUaGFuRXJyb3IiLCJBc3NlcnRHcmVhdGVyT3JFcXVhbFRoYW5FcnJvciIsIkFzc2VydExlc3NUaGFuRXJyb3IiLCJBc3NlcnRMZXNzT3JFcXVhbFRoYW5FcnJvciIsIkVycm9yIiwiQXNzZXJ0RXJyb3IiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJhc3NlcnRHcmVhdGVyT3JFcXVhbFRoYW4iLCJhc3NlcnRMZXNzT3JFcXVhbFRoYW4iLCJnZXRSZWQiLCJ0aGlzIiwiZ2V0R3JlZW4iLCJnZXRCbHVlIiwibWl4IiwidG8iLCJwZXJjZW50IiwiQ29sb3IiLCJNYXRoIiwicm91bmQiLCJ0b0hleEZvcm1hdCIsImhleCIsInNlZ2VtZW50IiwidiIsImxlbmd0aCIsInRvU3RyaW5nIiwicmFuZG9tIiwicmFuZG9tSW50IiwiZnJvbUhleCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsInBhcnNlSW50IiwiZnJvbSIsImRlbHRhIiwiZmxvb3IiLCJncmlkIiwieCIsInkiLCJmYWN0b3J5IiwibW92ZUJ5T2ZmZXN0IiwiY29vcmRpbmF0ZXMiLCJnZXRDb29yZGluYXRlc2J5T2Zmc2V0IiwiY2VsbCIsImdldENlbGwiLCJpc0VtcHR5IiwiZGVsZXRlIiwiaW5zZXJ0IiwiZGVsZXRlQnlPZmZzZXQiLCJnZXRCeU9mZmVzdCIsInJlcGxhY2UiLCJjcmVhdGVDZWxsIiwic2l6ZSIsImdldFNpemUiLCJyZXN1bHRYIiwicmVzdWx0WSIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwiY3JlYXRlV2FsbCIsIndhbGwiLCJXYWxsQ2VsbCIsImNyZWF0ZUVtcHR5IiwiZW1wdHkiLCJFbXB0eUNlbGwiLCJjcmVhdGVPcmdhbmlzbSIsImNvbG9yIiwiZ2Vub21lIiwiZW5lcmd5IiwiT3JnYW5pc21DZWxsIiwiY3JlYXRlUGxhbnQiLCJwbGFudCIsIlBsYW50Q2VsbCIsImNyZWF0ZU1lYXQiLCJtZWF0IiwiTWVhdENlbGwiLCJ2aXNpdEVtcHR5IiwidmlzaXRXYWxsIiwidmlzaXRPcmdhbmlzbSIsInZpc2l0UGxhbnQiLCJ2aXNpdE1lYXQiLCJ1cGRhdGUiLCJjb250ZXh0IiwiaXNTdGF0aWMiLCJDZWxsIiwiRGlyZWN0aW9uIiwiZ2V0T2Zmc2V0IiwiZGlyZWN0aW9uIiwiTk9SVEgiLCJOT1JUSF9FQVNUIiwiTk9SVEhfV0VTVCIsIlNPVVRIIiwiU09VVEhfRUFTVCIsIlNPVVRIX1dFU1QiLCJFQVNUIiwiV0VTVCIsImVudW1WYWx1ZXMiLCJPYmplY3QiLCJrZXlzIiwibWFwIiwibiIsImZpbHRlciIsImlzTmFOIiwicm90YXRlTGVmdCIsInJvdGF0ZVJpZ2h0IiwidmlzaXQiLCJ2aXNpdG9yIiwiV0FMTF9UWVBFIiwib3B0aW9ucyIsImFzc2lnbiIsIndpZHRoIiwiaGVpZ2h0Iiwid2FsbHMiLCJOT05FIiwiY2VsbEZhY3RvcnkiLCJTaXplIiwiZ2FtZSIsInR5cGUiLCJnZXRHcmlkIiwiQVJPVU5EIiwiZ2V0Q2VsbEZhY3RvcnkiLCJtYWtlV2FsbHMiLCJjcmVhdGVSYW5kb20iLCJzcGF3bk9yZ2FuaXNtcyIsIkdhbWVFdmVudHMiLCJwcmVTdGVwIiwiRXZlbnQiLCJwb3N0U3RlcCIsInN0ZXAiLCJzdGFydCIsInBhdXNlIiwidGltZW91dERlbGF5IiwiZXZlbnRTdWJzY3JpYmVycyIsImdlbmVyYXRlUGxhbnRzIiwiY291bnRFbXB0eSIsImNoYW5jZSIsImdldENlbGxDb3VudCIsIm5leHRTdGVwIiwiZmlyZUV2ZW50IiwidGltZW91dElkIiwic2V0VGltZW91dCIsInRpY2siLCJjbGVhclRpbWVvdXQiLCJnZXRTdGVwIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJwdXNoIiwiZm9yRWFjaCIsIlRhcmdldCIsInJhbmRvbUFjdGlvbiIsIk9yZ2FuaXNtQWN0aW9uIiwiZ2V0UmFuZG9tSW50IiwibWF4Iiwic2ltaWxhcml0eUxpbWl0IiwicmVmbGV4ZXMiLCJnZXRBY3Rpb24iLCJvcmdhbmlzbSIsInRhZ3JldENlbGwiLCJ0YWdyZXRUeXBlIiwiZGl2aXNpb25Qb3NzaWJsZSIsImdldEVuZXJneSIsIkVNUFRZIiwiV0FMTCIsIlBMQU5UIiwiTUVBVCIsImlzU2ltaWxhciIsIk9SR0FOSVNNX1NJTUlMQVIiLCJPUkdBTklTTV9PVEhFUiIsIkRJVklERSIsImFjdGlvbiIsInVuZGVmaW5lZCIsIk5PVEhJTkciLCJjb21wYXJlIiwiY2xvbmUiLCJHZW5vbWUiLCJnZW5lcmF0ZVJlZmxleEtleXMiLCJrZXkiLCJtdXRhdGVQYXJhbSIsInRhcmdldCIsInZhbHVlcyIsInJlc3VsdCIsInRhcmdldFZhbHVlIiwiY2VsbHMiLCJuZXh0IiwiaGFzTmV4dCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY3JlYXRlU25hcHNob3QiLCJhc3NlcnRMZXNzVGhhbiIsImxpZmV0aW1lIiwiZ2V0TGlmZXRpbWUiLCJnZXREaXJlY3Rpb24iLCJnZXRHZW5vbWUiLCJvZmZzZXRCeURpcmVjdGlvbiIsIlNURVAiLCJjaGFuZ2VFbmVyZ3kiLCJST1RBVEVfTEVGVCIsIlJPVEFURV9SSUdIVCIsIkFUVEFDSyIsImtpbGwiLCJFQVQiLCJnZXRDb2xvciIsInNldFdpZHRoIiwic2V0SGVpZ2h0IiwiZ2V0UmF0aW8iLCJjYW52YXMiLCJyZW5kZXJTdHJhdGVneSIsImdldENvbnRleHQiLCJzZXRSZW5kZXJTdHJhdGVneSIsInJlbmRlciIsImdhbWVSYXRpbyIsInN0YXJ0UG9zaXRpb24iLCJjZWxsU2l6ZSIsImN1cnNvclgiLCJjdXJzb3JZIiwiY3JlYXRlVmlzaXRvciIsInN0cmF0ZWd5Iiwic3R5bGVzIiwiQ0VMTF9XQUxMX0NPTE9SIiwiQ0VMTF9PUkdBTklTTV9DT0xPUiIsIkNFTExfT1JHQU5JU01fRVlFX0NPTE9SIiwiQ0VMTF9FTVBUWV9DT0xPUiIsIkNFTExfUExBTlRfQ09MT1IiLCJDRUxMX01FQVRfQ09MT1IiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImV5ZU9mZnNldCIsImV5ZVNpemUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FudmFzQ29udGFpbmVyIiwiZml0Q2FudmFzIiwiY29udGFpbmVyIiwic2V0QXR0cmlidXRlIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJyZW5kZXJlciIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==